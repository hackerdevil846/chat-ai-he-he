const fs = global.nodemodule["fs-extra"];
const moment = require("moment-timezone");

module.exports.config = {
    name: "goibot2",
    version: "1.0.2",
    hasPermssion: 0,
    credits: "ğ‘¨ğ’”ğ’Šğ’‡ ğ‘´ğ’‚ğ’‰ğ’ğ’–ğ’…",
    description: "ğŸµ ğ— ğ˜‚ğ˜€ğ—¶ğ—° ğ—•ğ—¼ğ˜ ğ—”ğ˜‚ğ˜ğ—¼-ğ—¥ğ—²ğ˜€ğ—½ğ—¼ğ—»ğ—± ğ—¦ğ˜†ğ˜€ğ˜ğ—²ğ—º",
    commandCategory: "ğ—¦ğ˜†ğ˜€ğ˜ğ—²ğ—º",
    usages: "[]",
    cooldowns: 3,
    dependencies: {
        "moment-timezone": "",
        "fs-extra": ""
    },
    envConfig: {
        timezone: "Asia/Dhaka"
    }
};

module.exports.languages = {
    "en": {
        "welcome": "ğŸµ ğ— ğ˜‚ğ˜€ğ—¶ğ—° ğ—•ğ—¼ğ˜ ğ—”ğ—°ğ˜ğ—¶ğ˜ƒğ—®ğ˜ğ—²ğ—±",
        "response": "âœ¨ ğ—”ğ˜‚ğ˜ğ—¼-ğ—¥ğ—²ğ˜€ğ—½ğ—¼ğ—»ğ—±ğ—²ğ—¿ ğ—”ğ—°ğ˜ğ—¶ğ˜ƒğ—²"
    }
};

module.exports.onLoad = function() {
    console.log('\x1b[36m%s\x1b[0m', 'ğŸµ ğ— ğ˜‚ğ˜€ğ—¶ğ—° ğ—•ğ—¼ğ˜ ğ— ğ—¼ğ—±ğ˜‚ğ—¹ğ—² ğ—Ÿğ—¼ğ—®ğ—±ğ—²ğ—± ğ—¦ğ˜‚ğ—°ğ—°ğ—²ğ˜€ğ˜€ğ—³ğ˜‚ğ—¹ğ—¹ğ˜†');
};

function toMathBoldItalic(text) {
    const map = {
        'A': 'ğ‘¨', 'B': 'ğ‘©', 'C': 'ğ‘ª', 'D': 'ğ‘«', 'E': 'ğ‘¬', 'F': 'ğ‘­', 'G': 'ğ‘®', 'H': 'ğ‘¯', 'I': 'ğ‘°', 'J': 'ğ‘±', 
        'K': 'ğ‘²', 'L': 'ğ‘³', 'M': 'ğ‘´', 'N': 'ğ‘µ', 'O': 'ğ‘¶', 'P': 'ğ‘·', 'Q': 'ğ‘¸', 'R': 'ğ‘¹', 'S': 'ğ‘º', 'T': 'ğ‘»', 
        'U': 'ğ‘¼', 'V': 'ğ‘½', 'W': 'ğ‘¾', 'X': 'ğ‘¿', 'Y': 'ğ’€', 'Z': 'ğ’',
        'a': 'ğ’‚', 'b': 'ğ’ƒ', 'c': 'ğ’„', 'd': 'ğ’…', 'e': 'ğ’†', 'f': 'ğ’‡', 'g': 'ğ’ˆ', 'h': 'ğ’‰', 'i': 'ğ’Š', 'j': 'ğ’‹', 
        'k': 'ğ’Œ', 'l': 'ğ’', 'm': 'ğ’', 'n': 'ğ’', 'o': 'ğ’', 'p': 'ğ’‘', 'q': 'ğ’’', 'r': 'ğ’“', 's': 'ğ’”', 't': 'ğ’•', 
        'u': 'ğ’–', 'v': 'ğ’—', 'w': 'ğ’˜', 'x': 'ğ’™', 'y': 'ğ’š', 'z': 'ğ’›'
    };
    return text.split('').map(char => map[char] || char).join('');
}

module.exports.handleEvent = async function({ api, event, Users }) {
    try {
        const { threadID, messageID, senderID, body } = event;
        const time = moment.tz("Asia/Dhaka").format("ğ——ğ——/ğ— ğ— /ğ—¬ğ—¬ğ—¬ğ—¬ â•‘ ğ—›ğ—›:ğ—ºğ—º:ğ˜€ğ˜€");
        
        if (body && body.toLowerCase().includes("song")) {
            const name = await Users.getNameUser(senderID);
            const tl = [
                "ğŸ¶ ğ—§ğ˜‚ğ—ºğ—¶ ğ—®ğ—ºğ—®ğ—¿ ğ—µğ—¼ğ˜†ğ—² ğ˜ğ—µğ—®ğ—¸ğ—¼ ğ—»ğ—®, ğ—”ğ—ºğ—¶ ğ—§ğ—¼ğ—ºğ—®ğ—¸ ğ—•ğ—µğ—®ğ—¹ğ—¼ğ—¯ğ—¼ ğ—•ğ—¼ğ—¹ğ—¯ğ—¼ ğ—¡ğ—® ğŸŒ¹",
                "ğŸ’” ğ—§ğ˜‚ğ—ºğ—¶ ğ—ğ—² ğ—”ğ—ºğ—®ğ—¿ ğ—›ğ—¼ğ—¯ğ—², ğ—§ğ—®ğ—µğ—¼ğ—¹ğ—² ğ—§ğ—¼ğ—¯ğ—¼ ğ—¦ğ—¼ğ—¯ ğ—ğ—¶ğ—°ğ—µğ˜‚ ğ——ğ—¶ğ—»ğ—² ğ—£ğ—®ğ—¿ğ—¯ğ—¼ ğ—¡ğ—® ğŸµ",
                "ğŸŒŸ ğ—”ğ—ºğ—®ğ—¿ ğ—£ğ—¿ğ—®ğ—»ğ—²ğ—¿ ğ— ğ—®ğ—·ğ—µğ—² ğ—§ğ˜‚ğ—ºğ—¶, ğ—§ğ˜‚ğ—ºğ—¶ ğ—–ğ—µğ—®ğ—¿ğ—® ğ—ğ—¼ğ—»ğ—¼ ğ—šğ—®ğ—» ğ—¡ğ—²ğ—¶ ğŸ¤",
                "ğŸŒ  ğ—§ğ˜‚ğ—ºğ—¶ ğ—”ğ—ºğ—®ğ—¿ ğ—¦ğ—¼ğ—»ğ—±ğ—µğ—®ğ—», ğ—”ğ—ºğ—®ğ—¿ ğ—¦ğ—¼ğ—¯ ğ—ğ—¶ğ—°ğ—µğ˜‚, ğ—”ğ—ºğ—®ğ—¿ ğ—¦ğ—µğ—²ğ˜€ğ—µ ğ—¢ğ—¯ğ—¶ğ—±ğ—µğ—®ğ—» ğŸ¶",
                "ğŸŒ¹ ğ—§ğ˜‚ğ—ºğ—¶ ğ—˜ğ—¸ğ—® ğ—•ğ—®ğ—¿ ğ—£ğ—µğ—¶ğ—¿ğ—² ğ—”ğ—¦ğ—¼, ğ—”ğ—ºğ—¶ ğ—§ğ—¼ğ—ºğ—®ğ—¸ ğ—¡ğ—¶ğ—·ğ—²ğ—¿ ğ—ğ—¼ğ—¿ğ—² ğ—¡ğ—²ğ—¯ğ—¼ ğŸ’«",
                "ğŸµ ğ—”ğ—ºğ—®ğ—¿ ğ——ğ—¶ğ—¯ğ—® ğ—¥ğ—®ğ˜ğ—¶ ğ—§ğ˜‚ğ—ºğ—¶, ğ—”ğ—ºğ—®ğ—¿ ğ—¦ğ—¼ğ—¯ ğ—¦ğ—¼ğ—¸ğ—µğ—¼ ğ—§ğ˜‚ğ—ºğ—¶ ğŸŒ™",
                "âœ¨ ğ—§ğ˜‚ğ—ºğ—¶ ğ—ğ—®ğ—¸ğ—µğ—¼ğ—» ğ—”ğ—ºğ—®ğ—¿ ğ—ğ—®ğ—°ğ—µğ—², ğ—§ğ—®ğ—¸ğ—µğ—¼ğ—» ğ—¦ğ—¼ğ—¯ ğ—ğ—¶ğ—°ğ—µğ˜‚ ğ—£ğ—®ğ—¶ ğŸŒŸ",
                "ğŸ¶ ğ—”ğ—ºğ—®ğ—¿ ğ— ğ—¼ğ—»ğ—²ğ—¿ ğ—ğ—¼ğ˜ğ—µğ—® ğ—¦ğ˜‚ğ—»ğ—¼, ğ—§ğ˜‚ğ—ºğ—¶ ğ—–ğ—µğ—®ğ—¿ğ—® ğ—ğ—²ğ˜‚ ğ—¡ğ—²ğ—¶ ğŸ’­",
                "ğŸŒŒ ğ—§ğ˜‚ğ—ºğ—¶ ğ—”ğ—ºğ—®ğ—®ğ—¿ ğ—›ğ—¼ğ—¶ğ—² ğ—§ğ—µğ—®ğ—¸ğ—¹ğ—², ğ—”ğ—ºğ—¶ ğ—•ğ—²ğ—¹ğ—²ğ˜ğ—² ğ—£ğ—®ğ—¿ğ—¶ ğ—¡ğ—¶ ğŸ’–",
                "ğŸµ ğ—”ğ—ºğ—®ğ—¿ ğ—£ğ—¿ğ—¶ğ˜†ğ—¼ ğ—›ğ—¼ğ—¯ğ—¼ ğ—§ğ˜‚ğ—ºğ—¶, ğ—”ğ—ºğ—¶ ğ—¦ğ—¼ğ—¯ ğ—–ğ—µğ—²ğ˜†ğ—² ğ—£ğ—¿ğ—¶ğ˜†ğ—¼ ğŸŒŸ"
            ];
            
            const rand = tl[Math.floor(Math.random() * tl.length)];
            const creditName = toMathBoldItalic("Asif") + " " + toMathBoldItalic("Mahmud");

            const msg = {
                body: `â•”â•â•â•â•â•à®œÛ©ÛÛ©à®œâ•â•â•â•â•â•—
ğŸµ ğ—›ğ—˜ğ—Ÿğ—Ÿğ—¼ ${name} ğŸ’–
â•šâ•â•â•â•â•à®œÛ©ÛÛ©à®œâ•â•â•â•â•â•

ã€ ${rand} ã€

âœ¦â‹†â‹…â˜†â‹…â‹†âœ¦â‹†â‹…â˜†â‹…â‹†âœ¦â‹†â‹…â˜†â‹…â‹†âœ¦

ğ—–ğ—¿ğ—²ğ—±ğ—¶ğ˜ğ˜€ Â» ${creditName}
ğ—§ğ—¶ğ—ºğ—² Â» ${time}
âœ¦â‹†â‹…â˜†â‹…â‹†âœ¦â‹†â‹…â˜†â‹…â‹†âœ¦â‹†â‹…â˜†â‹…â‹†âœ¦`
            };
            
            return api.sendMessage(msg, threadID, messageID);
        }
    } catch (error) {
        console.error('Error in handleEvent:', error);
    }
};

module.exports.run = function({ api, event }) {
    api.sendMessage("ğŸµ ğ— ğ˜‚ğ˜€ğ—¶ğ—° ğ—•ğ—¼ğ˜ ğ—œğ˜€ ğ—”ğ—°ğ˜ğ—¶ğ˜ƒğ—²\n\nğ—¦ğ—²ğ—»ğ—± 'ğ˜€ğ—¼ğ—»ğ—´' ğ˜ğ—¼ ğ˜ğ—¿ğ—¶ğ—´ğ—´ğ—²ğ—¿ ğ—®ğ˜‚ğ˜ğ—¼-ğ—¿ğ—²ğ˜€ğ—½ğ—¼ğ—»ğ˜€ğ—²", event.threadID, event.messageID);
};
