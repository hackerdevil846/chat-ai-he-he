const fs = require("fs-extra");
const moment = require("moment-timezone");

module.exports.config = {
    name: "goibot2",
    aliases: ["musicbot", "autoresponder"],
    version: "1.0.2",
    author: "ğ´ğ‘ ğ‘–ğ‘“ ğ‘€ğ‘â„ğ‘šğ‘¢ğ‘‘",
    countDown: 3,
    role: 0,
    category: "system",
    shortDescription: {
        en: "ğŸµ ğ‘€ğ‘¢ğ‘ ğ‘–ğ‘ ğµğ‘œğ‘¡ ğ´ğ‘¢ğ‘¡ğ‘œ-ğ‘…ğ‘’ğ‘ ğ‘ğ‘œğ‘›ğ‘‘ ğ‘†ğ‘¦ğ‘ ğ‘¡ğ‘’ğ‘š"
    },
    longDescription: {
        en: "ğŸµ ğ‘€ğ‘¢ğ‘ ğ‘–ğ‘ ğµğ‘œğ‘¡ ğ´ğ‘¢ğ‘¡ğ‘œ-ğ‘…ğ‘’ğ‘ ğ‘ğ‘œğ‘›ğ‘‘ ğ‘†ğ‘¦ğ‘ ğ‘¡ğ‘’ğ‘š ğ‘¤ğ‘–ğ‘¡â„ ğ‘Ÿğ‘œğ‘šğ‘ğ‘›ğ‘¡ğ‘–ğ‘ ğ‘ ğ‘œğ‘›ğ‘” ğ‘ğ‘¢ğ‘œğ‘¡ğ‘’ğ‘ "
    },
    guide: {
        en: "{p}goibot2"
    },
    dependencies: {
        "moment-timezone": "",
        "fs-extra": ""
    },
    envConfig: {
        timezone: "Asia/Dhaka"
    }
};

module.exports.languages = {
    "en": {
        "welcome": "ğŸµ ğ‘€ğ‘¢ğ‘ ğ‘–ğ‘ ğµğ‘œğ‘¡ ğ´ğ‘ğ‘¡ğ‘–ğ‘£ğ‘ğ‘¡ğ‘’ğ‘‘",
        "response": "âœ¨ ğ´ğ‘¢ğ‘¡ğ‘œ-ğ‘…ğ‘’ğ‘ ğ‘ğ‘œğ‘›ğ‘‘ğ‘’ğ‘Ÿ ğ´ğ‘ğ‘¡ğ‘–ğ‘£ğ‘’"
    },
    "bn": {
        "welcome": "ğŸµ ğ‘€ğ‘¢ğ‘ ğ‘–ğ‘ ğµğ‘œğ‘¡ ğ´ğ‘ğ‘¡ğ‘–ğ‘£ğ‘ğ‘¡ğ‘’ğ‘‘",
        "response": "âœ¨ ğ´ğ‘¢ğ‘¡ğ‘œ-ğ‘…ğ‘’ğ‘ ğ‘ğ‘œğ‘›ğ‘‘ğ‘’ğ‘Ÿ ğ´ğ‘ğ‘¡ğ‘–ğ‘£ğ‘’"
    }
};

module.exports.onLoad = function () {
    console.log('\x1b[36m%s\x1b[0m', 'ğŸµ ğ‘€ğ‘¢ğ‘ ğ‘–ğ‘ ğµğ‘œğ‘¡ ğ‘€ğ‘œğ‘‘ğ‘¢ğ‘™ğ‘’ ğ¿ğ‘œğ‘ğ‘‘ğ‘’ğ‘‘ ğ‘†ğ‘¢ğ‘ğ‘ğ‘’ğ‘ ğ‘ ğ‘“ğ‘¢ğ‘™ğ‘™ğ‘¦');
};

// Utility function: Convert normal text to Mathematical Bold Italic
function toMathBoldItalic(text) {
    const map = {
        'A': 'ğ‘¨', 'B': 'ğ‘©', 'C': 'ğ‘ª', 'D': 'ğ‘«', 'E': 'ğ‘¬', 'F': 'ğ‘­', 'G': 'ğ‘®', 'H': 'ğ‘¯', 'I': 'ğ‘°', 'J': 'ğ‘±',
        'K': 'ğ‘²', 'L': 'ğ‘³', 'M': 'ğ‘´', 'N': 'ğ‘µ', 'O': 'ğ‘¶', 'P': 'ğ‘·', 'Q': 'ğ‘¸', 'R': 'ğ‘¹', 'S': 'ğ‘º', 'T': 'ğ‘»',
        'U': 'ğ‘¼', 'V': 'ğ‘½', 'W': 'ğ‘¾', 'X': 'ğ‘¿', 'Y': 'ğ’€', 'Z': 'ğ’',
        'a': 'ğ’‚', 'b': 'ğ’ƒ', 'c': 'ğ’„', 'd': 'ğ’…', 'e': 'ğ’†', 'f': 'ğ’‡', 'g': 'ğ’ˆ', 'h': 'ğ’‰', 'i': 'ğ’Š', 'j': 'ğ’‹',
        'k': 'ğ’Œ', 'l': 'ğ’', 'm': 'ğ’', 'n': 'ğ’', 'o': 'ğ’', 'p': 'ğ’‘', 'q': 'ğ’’', 'r': 'ğ’“', 's': 'ğ’”', 't': 'ğ’•',
        'u': 'ğ’–', 'v': 'ğ’—', 'w': 'ğ’˜', 'x': 'ğ’™', 'y': 'ğ’š', 'z': 'ğ’›'
    };
    return text.split('').map(char => map[char] || char).join('');
}

module.exports.onChat = async function ({ event, api, Users }) {
    try {
        const { threadID, messageID, senderID, body } = event;
        const time = moment.tz("Asia/Dhaka").format("DD/MM/YYYY â•‘ HH:mm:ss");

        if (body && body.toLowerCase().includes("song")) {
            const name = await Users.getNameUser(senderID);

            const tl = [
                "ğŸ¶ ğ‘‡ğ‘¢ğ‘šğ‘– ğ‘ğ‘šğ‘ğ‘Ÿ â„ğ‘œğ‘¦ğ‘’ ğ‘¡â„ğ‘ğ‘˜ğ‘œ ğ‘›ğ‘, ğ‘ğ‘šğ‘– ğ‘¡ğ‘œğ‘šğ‘ğ‘˜ ğ‘â„ğ‘ğ‘™ğ‘œğ‘ğ‘ğ‘ â„ğ‘– ğ‘ğ‘œğ‘™ğ‘ğ‘œ ğ‘›ğ‘ ğŸŒ¹",
                "ğŸ’” ğ‘‡ğ‘¢ğ‘šğ‘– ğ‘—ğ‘’ ğ‘ğ‘šğ‘ğ‘Ÿ â„ğ‘œğ‘ğ‘’, ğ‘¡ğ‘â„ğ‘œğ‘™ğ‘’ ğ‘¡ğ‘œğ‘ğ‘œ ğ‘ ğ‘œğ‘ ğ‘˜ğ‘–ğ‘â„ğ‘¢ ğ‘‘ğ‘–ğ‘›ğ‘’ ğ‘ğ‘ğ‘Ÿğ‘ğ‘œ ğ‘›ğ‘ ğŸµ",
                "ğŸŒŸ ğ´ğ‘šğ‘ğ‘Ÿ ğ‘ğ‘Ÿğ‘ğ‘›ğ‘’ğ‘Ÿ ğ‘šğ‘ğ‘—â„ğ‘’ ğ‘¡ğ‘¢ğ‘šğ‘–, ğ‘¡ğ‘¢ğ‘šğ‘– ğ‘â„ğ‘ğ‘Ÿğ‘ ğ‘˜ğ‘œğ‘›ğ‘œ ğ‘”ğ‘ğ‘› ğ‘›ğ‘’ğ‘– ğŸ¤",
                "ğŸŒ  ğ‘‡ğ‘¢ğ‘šğ‘– ğ‘ğ‘šğ‘ğ‘Ÿ ğ‘ ğ‘œğ‘›ğ‘‘â„ğ‘ğ‘›, ğ‘ğ‘šğ‘ğ‘Ÿ ğ‘ ğ‘œğ‘ ğ‘˜ğ‘–ğ‘â„ğ‘¢, ğ‘ğ‘šğ‘ğ‘Ÿ ğ‘ â„ğ‘’ğ‘ â„ ğ‘œğ‘ğ‘–ğ‘‘â„ğ‘ğ‘› ğŸ¶",
                "ğŸŒ¹ ğ‘‡ğ‘¢ğ‘šğ‘– ğ‘’ğ‘˜ğ‘ ğ‘ğ‘ğ‘Ÿ ğ‘“ğ‘–ğ‘Ÿğ‘’ ğ‘ğ‘ ğ‘œ, ğ‘ğ‘šğ‘– ğ‘¡ğ‘œğ‘šğ‘ğ‘˜ğ‘’ ğ‘›ğ‘–ğ‘—ğ‘’ğ‘Ÿ ğ‘˜ğ‘œğ‘Ÿğ‘’ ğ‘›ğ‘’ğ‘ğ‘œ ğŸ’«",
                "ğŸµ ğ´ğ‘šğ‘ğ‘Ÿ ğ‘‘ğ‘–ğ‘ğ‘ ğ‘Ÿğ‘ğ‘¡ğ‘– ğ‘¡ğ‘¢ğ‘šğ‘–, ğ‘ğ‘šğ‘ğ‘Ÿ ğ‘ ğ‘œğ‘ ğ‘ ğ‘œğ‘˜â„ğ‘œ ğ‘¡ğ‘¢ğ‘šğ‘– ğŸŒ™",
                "âœ¨ ğ‘‡ğ‘¢ğ‘šğ‘– ğ‘—ğ‘œğ‘˜â„ğ‘œğ‘› ğ‘ğ‘šğ‘ğ‘Ÿ ğ‘˜ğ‘ğ‘â„ğ‘’, ğ‘¡ğ‘œğ‘˜â„ğ‘œğ‘› ğ‘ ğ‘œğ‘ ğ‘˜ğ‘–ğ‘â„ğ‘¢ ğ‘ğ‘ğ‘– ğŸŒŸ",
                "ğŸ¶ ğ´ğ‘šğ‘ğ‘Ÿ ğ‘šğ‘œğ‘›ğ‘’ğ‘Ÿ ğ‘˜ğ‘œğ‘¡â„ğ‘ ğ‘ â„ğ‘¢ğ‘›ğ‘œ, ğ‘¡ğ‘¢ğ‘šğ‘– ğ‘â„ğ‘ğ‘Ÿğ‘ ğ‘˜ğ‘’ğ‘¢ ğ‘›ğ‘’ğ‘– ğŸ’­",
                "ğŸŒŒ ğ‘‡ğ‘¢ğ‘šğ‘– ğ‘ğ‘šğ‘ğ‘Ÿ â„ğ‘œğ‘¦ğ‘’ ğ‘¡â„ğ‘ğ‘˜ğ‘™ğ‘’, ğ‘ğ‘šğ‘– ğ‘ğ‘’ğ‘â„ğ‘’ğ‘¡ğ‘’ ğ‘ğ‘ğ‘Ÿğ‘– ğ‘›ğ‘– ğŸ’–",
                "ğŸµ ğ´ğ‘šğ‘ğ‘Ÿ ğ‘ğ‘Ÿğ‘–ğ‘¦ğ‘œ â„ğ‘œğ‘ğ‘œ ğ‘¡ğ‘¢ğ‘šğ‘–, ğ‘ğ‘šğ‘– ğ‘ ğ‘œğ‘ ğ‘â„ğ‘’ğ‘¦ğ‘’ ğ‘ğ‘Ÿğ‘–ğ‘¦ğ‘œ ğŸŒŸ"
            ];

            const rand = tl[Math.floor(Math.random() * tl.length)];
            const creditName = toMathBoldItalic("Asif") + " " + toMathBoldItalic("Mahmud");

            const msg = {
                body: `â•”â•â•â•â•â•à®œÛ©ÛÛ©à®œâ•â•â•â•â•â•—
ğŸµ ğ»ğ‘’ğ‘™ğ‘™ğ‘œ ${name} ğŸ’–
â•šâ•â•â•â•â•à®œÛ©ÛÛ©à®œâ•â•â•â•â•â•

ã€ ${rand} ã€

âœ¦â‹†â‹…â˜†â‹…â‹†âœ¦â‹†â‹…â˜†â‹…â‹†âœ¦â‹†â‹…â˜†â‹…â‹†âœ¦

ğŸ“Œ ğ¶ğ‘Ÿğ‘’ğ‘‘ğ‘–ğ‘¡ğ‘  Â» ${creditName}
â° ğ‘‡ğ‘–ğ‘šğ‘’ Â» ${time}
âœ¦â‹†â‹…â˜†â‹…â‹†âœ¦â‹†â‹…â˜†â‹…â‹†âœ¦â‹†â‹…â˜†â‹…â‹†âœ¦`
            };

            return api.sendMessage(msg, threadID, messageID);
        }
    } catch (error) {
        console.error('ğ¸ğ‘Ÿğ‘Ÿğ‘œğ‘Ÿ ğ‘–ğ‘› ğ‘œğ‘›ğ¶â„ğ‘ğ‘¡:', error);
    }
};

module.exports.onStart = async function ({ api, event }) {
    try {
        await api.sendMessage(
            "ğŸµ ğ‘€ğ‘¢ğ‘ ğ‘–ğ‘ ğµğ‘œğ‘¡ ğ¼ğ‘  ğ´ğ‘ğ‘¡ğ‘–ğ‘£ğ‘’\n\nğŸ’¬ ğ‘†ğ‘’ğ‘›ğ‘‘ 'ğ‘ ğ‘œğ‘›ğ‘”' ğ‘¡ğ‘œ ğ‘¡ğ‘Ÿğ‘–ğ‘”ğ‘”ğ‘’ğ‘Ÿ ğ‘ğ‘¢ğ‘¡ğ‘œ-ğ‘Ÿğ‘’ğ‘ ğ‘ğ‘œğ‘›ğ‘ ğ‘’",
            event.threadID,
            event.messageID
        );
    } catch (error) {
        console.error('ğ¸ğ‘Ÿğ‘Ÿğ‘œğ‘Ÿ ğ‘–ğ‘› ğ‘œğ‘›ğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘¡:', error);
    }
};
