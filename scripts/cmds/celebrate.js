module.exports.config = {
    name: "celebrate",
    aliases: ["party", "celebration"],
    version: "1.4.0",
    author: "ğ´ğ‘ ğ‘–ğ‘“ ğ‘€ğ‘â„ğ‘šğ‘¢ğ‘‘",
    countDown: 60,
    role: 0,
    category: "fun",
    shortDescription: {
        en: "ğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘¡ ğ‘ ğ‘—ğ‘œğ‘¦ğ‘“ğ‘¢ğ‘™ ğ‘ğ‘’ğ‘™ğ‘’ğ‘ğ‘Ÿğ‘ğ‘¡ğ‘–ğ‘œğ‘› ğ‘–ğ‘› ğ‘â„ğ‘ğ‘¡"
    },
    longDescription: {
        en: "ğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘¡ ğ‘ ğ‘—ğ‘œğ‘¦ğ‘“ğ‘¢ğ‘™ ğ‘ğ‘’ğ‘™ğ‘’ğ‘ğ‘Ÿğ‘ğ‘¡ğ‘–ğ‘œğ‘› ğ‘–ğ‘› ğ‘â„ğ‘ğ‘¡ ğ‘¤ğ‘–ğ‘¡â„ ğ‘–ğ‘›ğ‘¡ğ‘’ğ‘Ÿğ‘ğ‘ğ‘¡ğ‘–ğ‘£ğ‘’ ğ‘šğ‘’ğ‘ ğ‘ ğ‘ğ‘”ğ‘’ğ‘  ğ‘ğ‘›ğ‘‘ ğ‘’ğ‘šğ‘œğ‘—ğ‘–ğ‘ "
    },
    guide: {
        en: "{p}celebrate [@ğ‘šğ‘’ğ‘›ğ‘¡ğ‘–ğ‘œğ‘› ğ‘œğ‘Ÿ ğ‘›ğ‘ğ‘šğ‘’]"
    }
};

module.exports.onStart = async function({ api, event, args }) {
    try {
        const { threadID, messageID, mentions } = event;

        // Determine who to celebrate
        let name = "ğ‘’ğ‘£ğ‘’ğ‘Ÿğ‘¦ğ‘œğ‘›ğ‘’";
        let isMentioned = false;

        if (Object.keys(mentions).length > 0) {
            const mentionedID = Object.keys(mentions)[0];
            name = mentions[mentionedID];
            isMentioned = true;
        } else if (args.length > 0) {
            name = args.join(" ");
        }

        // Initial message
        await api.sendMessage(
            `ğŸ‰ ğ¿ğ¸ğ‘‡'ğ‘† ğ¶ğ¸ğ¿ğ¸ğµğ‘…ğ´ğ‘‡ğ¸ ${name.toUpperCase()}! ğŸ‰\n` +
            "â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n" +
            `ğºğ‘’ğ‘¡ ğ‘Ÿğ‘’ğ‘ğ‘‘ğ‘¦ ğ‘“ğ‘œğ‘Ÿ ğ‘ğ‘› 80-ğ‘ ğ‘’ğ‘ğ‘œğ‘›ğ‘‘ ğ‘ğ‘’ğ‘™ğ‘’ğ‘ğ‘Ÿğ‘ğ‘¡ğ‘–ğ‘œğ‘› ${isMentioned ? 'ğ‘¤ğ‘–ğ‘¡â„ ğ‘ ğ‘ğ‘’ğ‘ğ‘–ğ‘ğ‘™ ğ‘šğ‘’ğ‘›ğ‘¡ğ‘–ğ‘œğ‘›ğ‘ !' : 'ğ‘“ğ‘¢ğ‘™ğ‘™ ğ‘œğ‘“ ğ‘—ğ‘œğ‘¦!'}\n` +
            "ğŸˆ ğ‘€ğ‘’ğ‘ ğ‘ ğ‘ğ‘”ğ‘’ğ‘  ğ‘¤ğ‘–ğ‘™ğ‘™ ğ‘ğ‘ğ‘ğ‘’ğ‘ğ‘Ÿ ğ‘’ğ‘£ğ‘’ğ‘Ÿğ‘¦ 3 ğ‘ ğ‘’ğ‘ğ‘œğ‘›ğ‘‘ğ‘ ...",
            threadID
        );

        // Celebration messages with delays
        const celebrationMessages = [
            {delay: 3, msg: "ğŸ‡ ğ¿ğ‘’ğ‘¡ ğ‘¡â„ğ‘’ ğ‘ğ‘’ğ‘™ğ‘’ğ‘ğ‘Ÿğ‘ğ‘¡ğ‘–ğ‘œğ‘› ğ‘ğ‘’ğ‘”ğ‘–ğ‘›! ğŸ‡"},
            {delay: 6, msg: `ğŸŒŸ ${name} ğ‘–ğ‘  ğ‘¡â„ğ‘’ ğ‘ ğ‘¡ğ‘ğ‘Ÿ ğ‘œğ‘“ ğ‘¡â„ğ‘’ ğ‘ â„ğ‘œğ‘¤! ğŸŒŸ`},
            {delay: 9, msg: "âœ¨ ğ‘ƒğ‘œğ‘ ğ‘–ğ‘¡ğ‘–ğ‘£ğ‘’ ğ‘£ğ‘–ğ‘ğ‘’ğ‘  ğ‘œğ‘›ğ‘™ğ‘¦! âœ¨"},
            {delay: 12, msg: "ğŸ¥³ ğ‘‡ğ‘–ğ‘šğ‘’ ğ‘¡ğ‘œ ğ‘‘ğ‘ğ‘›ğ‘ğ‘’! ğŸ•ºğŸ’ƒ"},
            {delay: 15, msg: "ğŸˆ ğ¿ğ‘’ğ‘¡'ğ‘  ğ‘ ğ‘ğ‘Ÿğ‘’ğ‘ğ‘‘ ğ‘—ğ‘œğ‘¦ ğ‘ğ‘›ğ‘‘ â„ğ‘ğ‘ğ‘ğ‘–ğ‘›ğ‘’ğ‘ ğ‘ ! ğŸˆ"},
            {delay: 18, msg: "ğŸŒˆ ğ¿ğ‘–ğ‘“ğ‘’ ğ‘–ğ‘  ğ‘ğ‘’ğ‘ğ‘¢ğ‘¡ğ‘–ğ‘“ğ‘¢ğ‘™! ğŸŒˆ"},
            {delay: 21, msg: `ğŸ’– ğ‘Œğ‘œğ‘¢'ğ‘Ÿğ‘’ ğ‘ğ‘šğ‘ğ‘§ğ‘–ğ‘›ğ‘”, ${name}! ğŸ’–`},
            {delay: 24, msg: "ğŸŠ ğ¶ğ‘’ğ‘™ğ‘’ğ‘ğ‘Ÿğ‘ğ‘¡ğ‘–ğ‘œğ‘› ğ‘¡ğ‘–ğ‘šğ‘’! ğŸŠ"},
            {delay: 27, msg: "ğŸ¥‚ ğ¶â„ğ‘’ğ‘’ğ‘Ÿğ‘  ğ‘¡ğ‘œ ğ‘”ğ‘œğ‘œğ‘‘ ğ‘¡ğ‘–ğ‘šğ‘’ğ‘ ! ğŸ¥‚"},
            {delay: 30, msg: "ğŸŒ  ğ‘€ğ‘ğ‘˜ğ‘’ ğ‘ ğ‘¤ğ‘–ğ‘ â„! ğŸŒ "},
            {delay: 33, msg: "ğŸµ ğ‘€ğ‘¢ğ‘ ğ‘–ğ‘ ğ‘šğ‘ğ‘˜ğ‘’ğ‘  ğ‘’ğ‘£ğ‘’ğ‘Ÿğ‘¦ğ‘¡â„ğ‘–ğ‘›ğ‘” ğ‘ğ‘’ğ‘¡ğ‘¡ğ‘’ğ‘Ÿ! ğŸµ"},
            {delay: 36, msg: "ğŸ˜Š ğ‘†ğ‘šğ‘–ğ‘™ğ‘’ - ğ‘–ğ‘¡'ğ‘  ğ‘ğ‘œğ‘›ğ‘¡ğ‘ğ‘”ğ‘–ğ‘œğ‘¢ğ‘ ! ğŸ˜Š"},
            {delay: 39, msg: `ğŸŒŸ ğ‘†â„ğ‘–ğ‘›ğ‘’ ğ‘ğ‘Ÿğ‘–ğ‘”â„ğ‘¡ ğ‘™ğ‘–ğ‘˜ğ‘’ ğ‘ ğ‘‘ğ‘–ğ‘ğ‘šğ‘œğ‘›ğ‘‘, ${name}! ğŸŒŸ`},
            {delay: 42, msg: "ğŸ•Šï¸ ğ‘ƒğ‘’ğ‘ğ‘ğ‘’ ğ‘ğ‘›ğ‘‘ ğ‘™ğ‘œğ‘£ğ‘’ ğ‘¡ğ‘œ ğ‘ğ‘™ğ‘™! ğŸ•Šï¸"},
            {delay: 45, msg: "ğŸ™Œ ğºğ‘Ÿğ‘œğ‘¢ğ‘ â„ğ‘¢ğ‘” ğ‘¡ğ‘–ğ‘šğ‘’! ğŸ¤—"},
            {delay: 48, msg: "ğŸ ğ‘†ğ‘¢ğ‘Ÿğ‘ğ‘Ÿğ‘–ğ‘ ğ‘’! ğ‘Œğ‘œğ‘¢'ğ‘Ÿğ‘’ ğ‘ğ‘¤ğ‘’ğ‘ ğ‘œğ‘šğ‘’! ğŸ"},
            {delay: 51, msg: "ğŸ’« ğ‘€ğ‘ğ‘”ğ‘–ğ‘ğ‘ğ‘™ ğ‘šğ‘œğ‘šğ‘’ğ‘›ğ‘¡ğ‘  ğ‘¤ğ‘–ğ‘¡â„ ğ‘“ğ‘Ÿğ‘–ğ‘’ğ‘›ğ‘‘ğ‘ ! ğŸ’«"},
            {delay: 54, msg: "ğŸ¤ ğ¿ğ‘’ğ‘¡'ğ‘  ğ‘ ğ‘–ğ‘›ğ‘” ğ‘¡ğ‘œğ‘”ğ‘’ğ‘¡â„ğ‘’ğ‘Ÿ! ğŸ¶"},
            {delay: 57, msg: "ğŸŒ» ğ‘†ğ‘ğ‘Ÿğ‘’ğ‘ğ‘‘ ğ‘˜ğ‘–ğ‘›ğ‘‘ğ‘›ğ‘’ğ‘ ğ‘  ğ‘™ğ‘–ğ‘˜ğ‘’ ğ‘ ğ‘¢ğ‘›ğ‘ â„ğ‘–ğ‘›ğ‘’! ğŸŒ»"},
            {delay: 60, msg: `ğŸ† ğ‘Œğ‘œğ‘¢'ğ‘Ÿğ‘’ ğ‘ ğ‘¤ğ‘–ğ‘›ğ‘›ğ‘’ğ‘Ÿ, ${name}! ğŸ†`},
            {delay: 63, msg: "ğŸ¨ ğ¿ğ‘–ğ‘“ğ‘’ ğ‘–ğ‘  ğ‘¦ğ‘œğ‘¢ğ‘Ÿ ğ‘ğ‘ğ‘›ğ‘£ğ‘ğ‘  - ğ‘ğ‘ğ‘–ğ‘›ğ‘¡ ğ‘–ğ‘¡ ğ‘ğ‘Ÿğ‘–ğ‘”â„ğ‘¡! ğŸ¨"},
            {delay: 66, msg: "ğŸ¤ ğ‘‡ğ‘œğ‘”ğ‘’ğ‘¡â„ğ‘’ğ‘Ÿ ğ‘¤ğ‘’'ğ‘Ÿğ‘’ ğ‘ ğ‘¡ğ‘Ÿğ‘œğ‘›ğ‘”ğ‘’ğ‘Ÿ! ğŸ¤"},
            {delay: 69, msg: "ğŸŒ ğ‘€ğ‘ğ‘˜ğ‘’ ğ‘¡â„ğ‘’ ğ‘¤ğ‘œğ‘Ÿğ‘™ğ‘‘ ğ‘ ğ‘ğ‘’ğ‘¡ğ‘¡ğ‘’ğ‘Ÿ ğ‘ğ‘™ğ‘ğ‘ğ‘’! ğŸŒ"},
            {delay: 72, msg: "ğŸ‰ ğ‘‡â„ğ‘’ ğ‘ğ‘’ğ‘™ğ‘’ğ‘ğ‘Ÿğ‘ğ‘¡ğ‘–ğ‘œğ‘› ğ‘ğ‘œğ‘›ğ‘¡ğ‘–ğ‘›ğ‘¢ğ‘’ğ‘ ! ğŸ‰"},
            {delay: 75, msg: "â¤ï¸ ğ‘‡â„ğ‘ğ‘›ğ‘˜ ğ‘¦ğ‘œğ‘¢ ğ‘“ğ‘œğ‘Ÿ ğ‘¡â„ğ‘–ğ‘  ğ‘—ğ‘œğ‘¦ğ‘“ğ‘¢ğ‘™ ğ‘šğ‘œğ‘šğ‘’ğ‘›ğ‘¡! â¤ï¸"},
            {delay: 78, msg: "ğŸ† ğ¹ğ‘–ğ‘›ğ‘ğ‘™ ğ‘“ğ‘–ğ‘Ÿğ‘’ğ‘¤ğ‘œğ‘Ÿğ‘˜ğ‘ ! ğ‘Šâ„ğ‘ğ‘¡ ğ‘ğ‘› ğ‘ğ‘šğ‘ğ‘§ğ‘–ğ‘›ğ‘” ğ‘ğ‘’ğ‘™ğ‘’ğ‘ğ‘Ÿğ‘ğ‘¡ğ‘–ğ‘œğ‘›! ğŸ†"}
        ];

        for (const {delay, msg} of celebrationMessages) {
            await new Promise(resolve => setTimeout(resolve, delay * 1000));
            await api.sendMessage(msg, threadID);
        }

        // Final message
        await new Promise(resolve => setTimeout(resolve, 2000));
        await api.sendMessage(
            `ğŸŠ ğ¶ğ¸ğ¿ğ¸ğµğ‘…ğ´ğ‘‡ğ¼ğ‘‚ğ‘ ğ¶ğ‘‚ğ‘€ğ‘ƒğ¿ğ¸ğ‘‡ğ¸! ğŸŠ\n` +
            "â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n" +
            `ğ‘‡â„ğ‘ğ‘›ğ‘˜ğ‘  ğ‘“ğ‘œğ‘Ÿ ğ‘ğ‘’ğ‘™ğ‘’ğ‘ğ‘Ÿğ‘ğ‘¡ğ‘–ğ‘›ğ‘” ğ‘¤ğ‘–ğ‘¡â„ ğ‘¢ğ‘ , ${name}! â¤ï¸\n` +
            "ğ‘Œğ‘œğ‘¢ ğ‘šğ‘ğ‘‘ğ‘’ ğ‘¡â„ğ‘–ğ‘  ğ‘šğ‘œğ‘šğ‘’ğ‘›ğ‘¡ ğ‘ ğ‘ğ‘’ğ‘ğ‘–ğ‘ğ‘™! ğŸ¥°",
            threadID,
            messageID
        );

    } catch (error) {
        console.error("ğŸˆ ğ¶ğ‘’ğ‘™ğ‘’ğ‘ğ‘Ÿğ‘ğ‘¡ğ‘–ğ‘œğ‘› ğ¸ğ‘Ÿğ‘Ÿğ‘œğ‘Ÿ:", error);
        api.sendMessage(
            "ğŸ­ ğ‘‡â„ğ‘’ ğ‘ğ‘’ğ‘™ğ‘’ğ‘ğ‘Ÿğ‘ğ‘¡ğ‘–ğ‘œğ‘› ğ‘ğ‘œğ‘¢ğ‘™ğ‘‘ğ‘›'ğ‘¡ ğ‘ğ‘œğ‘›ğ‘¡ğ‘–ğ‘›ğ‘¢ğ‘’ ğ‘‘ğ‘¢ğ‘’ ğ‘¡ğ‘œ ğ‘ğ‘› ğ‘¢ğ‘›ğ‘’ğ‘¥ğ‘ğ‘’ğ‘ğ‘¡ğ‘’ğ‘‘ ğ‘’ğ‘Ÿğ‘Ÿğ‘œğ‘Ÿ.\n" +
            "ğ‘ƒğ‘™ğ‘’ğ‘ğ‘ ğ‘’ ğ‘¡ğ‘Ÿğ‘¦ ğ‘ğ‘”ğ‘ğ‘–ğ‘› ğ‘™ğ‘ğ‘¡ğ‘’ğ‘Ÿ ğ‘œğ‘Ÿ ğ‘ğ‘’ğ‘™ğ‘’ğ‘ğ‘Ÿğ‘ğ‘¡ğ‘’ ğ‘ ğ‘œğ‘šğ‘’ğ‘œğ‘›ğ‘’ ğ‘’ğ‘™ğ‘ ğ‘’!",
            event.threadID,
            event.messageID
        );
    }
};
