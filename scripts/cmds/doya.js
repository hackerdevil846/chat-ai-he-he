const axios = require('axios');
const fs = require('fs-extra');

module.exports.config = {
    name: "doya",
    aliases: ["dua", "islamicprayer"],
    version: "1.0.0",
    author: "ğ´ğ‘ ğ‘–ğ‘“ ğ‘€ğ‘â„ğ‘šğ‘¢ğ‘‘",
    countDown: 5,
    role: 0,
    category: "islam",
    shortDescription: {
        en: "ğ¼ğ‘ ğ‘™ğ‘ğ‘šğ‘–ğ‘ ğ‘ğ‘Ÿğ‘ğ‘¦ğ‘’ğ‘Ÿ ğ‘ğ‘œğ‘™ğ‘™ğ‘’ğ‘ğ‘¡ğ‘–ğ‘œğ‘›"
    },
    longDescription: {
        en: "ğ¶ğ‘œğ‘™ğ‘™ğ‘’ğ‘ğ‘¡ğ‘–ğ‘œğ‘› ğ‘œğ‘“ ğ¼ğ‘ ğ‘™ğ‘ğ‘šğ‘–ğ‘ ğ‘ğ‘Ÿğ‘ğ‘¦ğ‘’ğ‘Ÿğ‘  ğ‘ğ‘›ğ‘‘ ğ‘‘ğ‘¢ğ‘ğ‘ "
    },
    guide: {
        en: "{p}doya [ğ‘ğ‘Ÿğ‘ğ‘¦ğ‘’ğ‘Ÿ ğ‘›ğ‘¢ğ‘šğ‘ğ‘’ğ‘Ÿ]"
    },
    dependencies: {
        "axios": "",
        "fs-extra": ""
    }
};

module.exports.onStart = async function({ message, args, event }) {
    const { threadID, messageID } = event;
    
    const doyaContent = [
        {
            title: "ğŸ“– ğ¼ğ‘šğ‘ğ‘› ğ‘¤ğ‘–ğ‘¡â„ ğ‘‘ğ‘’ğ‘ğ‘¡â„ ğ‘ğ‘Ÿğ‘ğ‘¦ğ‘’ğ‘Ÿ",
            body: "âœ¨ ğ‘‚ ğ‘œğ‘¢ğ‘Ÿ ğ¿ğ‘œğ‘Ÿğ‘‘, ğ‘“ğ‘œğ‘Ÿğ‘”ğ‘–ğ‘£ğ‘’ ğ‘œğ‘¢ğ‘Ÿ ğ‘ ğ‘–ğ‘›ğ‘ , ğ‘Ÿğ‘’ğ‘šğ‘œğ‘£ğ‘’ ğ‘ğ‘™ğ‘™ ğ‘’ğ‘£ğ‘–ğ‘™ ğ‘“ğ‘Ÿğ‘œğ‘š ğ‘¢ğ‘ , ğ‘ğ‘›ğ‘‘ ğ‘”ğ‘Ÿğ‘ğ‘›ğ‘¡ ğ‘¢ğ‘  ğ‘¡â„ğ‘’ ğ‘ğ‘œğ‘šğ‘ğ‘ğ‘›ğ‘¦ ğ‘œğ‘“ ğ‘¡â„ğ‘’ ğ‘Ÿğ‘–ğ‘”â„ğ‘¡ğ‘’ğ‘œğ‘¢ğ‘ .",
            image: "https://i.imgur.com/aESlOKd.jpeg"
        },
        {
            title: "ğŸŒº ğ‘ƒğ‘Ÿğ‘ğ‘¦ğ‘’ğ‘Ÿ ğ‘“ğ‘œğ‘Ÿ ğ‘”ğ‘œğ‘œğ‘‘ ğ‘ ğ‘ğ‘œğ‘¢ğ‘ ğ‘’",
            body: "ğŸ“œ ğ‘…ğ‘ğ‘ğ‘ğ‘ğ‘›ğ‘ â„ğ‘ğ‘ğ‘™ğ‘ğ‘›ğ‘ ğ‘šğ‘–ğ‘› ğ‘ğ‘§ğ‘¤ğ‘ğ‘—ğ‘–ğ‘›ğ‘ ğ‘¤ğ‘ ğ‘§ğ‘¢ğ‘Ÿğ‘Ÿğ‘–ğ‘¦ğ‘ğ‘¡ğ‘–ğ‘›ğ‘ ğ‘ğ‘¢ğ‘Ÿğ‘Ÿğ‘ğ‘¡ğ‘ ğ‘ğ‘¦ğ‘¢ğ‘›ğ‘–ğ‘› ğ‘¤ğ‘ğ‘ğ‘—ğ‘ğ‘™ğ‘›ğ‘ ğ‘™ğ‘–ğ‘™ğ‘šğ‘¢ğ‘¡ğ‘¡ğ‘ğ‘ğ‘–ğ‘›ğ‘ ğ‘–ğ‘šğ‘ğ‘šğ‘.\n\nğŸ’« ğ‘€ğ‘’ğ‘ğ‘›ğ‘–ğ‘›ğ‘”: 'ğ‘‚ ğ‘œğ‘¢ğ‘Ÿ ğ¿ğ‘œğ‘Ÿğ‘‘! ğºğ‘Ÿğ‘ğ‘›ğ‘¡ ğ‘¢ğ‘  ğ‘ğ‘œğ‘šğ‘“ğ‘œğ‘Ÿğ‘¡ ğ‘–ğ‘› ğ‘œğ‘¢ğ‘Ÿ ğ‘ ğ‘ğ‘œğ‘¢ğ‘ ğ‘’ğ‘  ğ‘ğ‘›ğ‘‘ ğ‘â„ğ‘–ğ‘™ğ‘‘ğ‘Ÿğ‘’ğ‘›, ğ‘ğ‘›ğ‘‘ ğ‘šğ‘ğ‘˜ğ‘’ ğ‘¢ğ‘  ğ‘™ğ‘’ğ‘ğ‘‘ğ‘’ğ‘Ÿğ‘  ğ‘œğ‘“ ğ‘¡â„ğ‘’ ğ‘Ÿğ‘–ğ‘”â„ğ‘¡ğ‘’ğ‘œğ‘¢ğ‘ .'",
            image: "https://i.imgur.com/3Bmg4Nd.jpeg"
        },
        {
            title: "â¤ï¸ ğ‘ƒğ‘Ÿğ‘ğ‘¦ğ‘’ğ‘Ÿ ğ‘ğ‘’ğ‘“ğ‘œğ‘Ÿğ‘’ ğ‘–ğ‘›ğ‘¡ğ‘–ğ‘šğ‘ğ‘ğ‘¦",
            body: "ğŸ“œ ğµğ‘–ğ‘ ğ‘šğ‘–ğ‘™ğ‘™ğ‘â„ğ‘– ğ´ğ‘™ğ‘™ğ‘â„ğ‘¢ğ‘šğ‘šğ‘ ğ‘—ğ‘ğ‘›ğ‘›ğ‘–ğ‘ğ‘›ğ‘ğ‘ â„ ğ‘ â„ğ‘ğ‘¦ğ‘¡ğ‘ğ‘›ğ‘ ğ‘¤ğ‘ ğ‘—ğ‘ğ‘›ğ‘›ğ‘–ğ‘ğ‘–ğ‘ â„ ğ‘ â„ğ‘ğ‘¦ğ‘¡ğ‘ğ‘›ğ‘ ğ‘šğ‘ ğ‘Ÿğ‘ğ‘§ğ‘ğ‘ğ‘¡ğ‘ğ‘›ğ‘.\n\nğŸ’« ğ‘€ğ‘’ğ‘ğ‘›ğ‘–ğ‘›ğ‘”: 'ğ¼ğ‘› ğ‘¡â„ğ‘’ ğ‘›ğ‘ğ‘šğ‘’ ğ‘œğ‘“ ğ´ğ‘™ğ‘™ğ‘â„. ğ‘‚ ğ´ğ‘™ğ‘™ğ‘â„! ğ‘ƒğ‘Ÿğ‘œğ‘¡ğ‘’ğ‘ğ‘¡ ğ‘¢ğ‘  ğ‘“ğ‘Ÿğ‘œğ‘š ğ‘†â„ğ‘ğ‘¦ğ‘¡ğ‘ğ‘›.'",
            image: "https://i.imgur.com/TUm1LQW.jpeg"
        },
        {
            title: "ğŸ•‹ ğ‘ƒğ‘Ÿğ‘ğ‘¦ğ‘’ğ‘Ÿ ğ‘“ğ‘œğ‘Ÿ ğ‘ğ‘Ÿğ‘œğ‘¡ğ‘’ğ‘ğ‘¡ğ‘–ğ‘œğ‘› ğ‘“ğ‘Ÿğ‘œğ‘š ğ‘ğ‘¢ğ‘›ğ‘–ğ‘ â„ğ‘šğ‘’ğ‘›ğ‘¡",
            body: "ğŸ“œ ğ´ğ‘™ğ‘™ğ‘â„ğ‘¢ğ‘šğ‘šğ‘ ğ‘ğ‘–ğ‘›ğ‘›ğ‘– ğ‘ğ‘§ğ‘ğ‘ğ‘ğ‘˜ğ‘ ğ‘¦ğ‘ğ‘¤ğ‘šğ‘ ğ‘¡ğ‘ğ‘ğ‘ğ‘¡â„ğ‘¢ ğ‘–ğ‘ğ‘ğ‘‘ğ‘ğ‘˜ğ‘\n\nğŸ’« ğ‘€ğ‘’ğ‘ğ‘›ğ‘–ğ‘›ğ‘”: 'ğ‘‚ ğ´ğ‘™ğ‘™ğ‘â„! ğ‘ƒğ‘Ÿğ‘œğ‘¡ğ‘’ğ‘ğ‘¡ ğ‘šğ‘’ ğ‘“ğ‘Ÿğ‘œğ‘š ğ‘Œğ‘œğ‘¢ğ‘Ÿ ğ‘ğ‘¢ğ‘›ğ‘–ğ‘ â„ğ‘šğ‘’ğ‘›ğ‘¡ ğ‘œğ‘› ğ‘¡â„ğ‘’ ğ‘‘ğ‘ğ‘¦ ğ‘Œğ‘œğ‘¢ ğ‘Ÿğ‘ğ‘–ğ‘ ğ‘’ ğ‘Œğ‘œğ‘¢ğ‘Ÿ ğ‘ ğ‘’ğ‘Ÿğ‘£ğ‘ğ‘›ğ‘¡ğ‘ .'",
            image: "https://i.imgur.com/wp7hM0m.jpeg"
        },
        {
            title: "ğŸŒ™ ğ‘ƒğ‘Ÿğ‘ğ‘¦ğ‘’ğ‘Ÿ ğ‘“ğ‘œğ‘Ÿ ğ‘“ğ‘œğ‘Ÿğ‘”ğ‘–ğ‘£ğ‘’ğ‘›ğ‘’ğ‘ ğ‘  ğ‘ğ‘›ğ‘‘ ğ‘šğ‘’ğ‘Ÿğ‘ğ‘¦",
            body: "ğŸ“œ ğ‘…ğ‘ğ‘ğ‘ğ‘ğ‘›ğ‘ ğ‘ğ‘šğ‘ğ‘›ğ‘›ğ‘ ğ‘“ğ‘ğ‘”â„ğ‘“ğ‘–ğ‘Ÿğ‘™ğ‘ğ‘›ğ‘ ğ‘¤ğ‘ğ‘Ÿâ„ğ‘ğ‘šğ‘›ğ‘ ğ‘¤ğ‘ğ‘ğ‘›ğ‘¡ğ‘ ğ‘˜â„ğ‘ğ‘–ğ‘Ÿğ‘¢ğ‘Ÿ ğ‘Ÿğ‘â„ğ‘–ğ‘šğ‘–ğ‘›.\n\nğŸ’« ğ‘€ğ‘’ğ‘ğ‘›ğ‘–ğ‘›ğ‘”: 'ğ‘‚ ğ‘œğ‘¢ğ‘Ÿ ğ¿ğ‘œğ‘Ÿğ‘‘! ğ‘Šğ‘’ â„ğ‘ğ‘£ğ‘’ ğ‘ğ‘’ğ‘™ğ‘–ğ‘’ğ‘£ğ‘’ğ‘‘, ğ‘ ğ‘œ ğ‘“ğ‘œğ‘Ÿğ‘”ğ‘–ğ‘£ğ‘’ ğ‘¢ğ‘  ğ‘ğ‘›ğ‘‘ â„ğ‘ğ‘£ğ‘’ ğ‘šğ‘’ğ‘Ÿğ‘ğ‘¦ ğ‘œğ‘› ğ‘¢ğ‘ , ğ‘ğ‘›ğ‘‘ ğ‘Œğ‘œğ‘¢ ğ‘ğ‘Ÿğ‘’ ğ‘¡â„ğ‘’ ğµğ‘’ğ‘ ğ‘¡ ğ‘œğ‘“ ğ‘¡â„ğ‘’ ğ‘šğ‘’ğ‘Ÿğ‘ğ‘–ğ‘“ğ‘¢ğ‘™.'",
            image: "https://i.imgur.com/pFvUmsm.jpeg"
        },
        {
            title: "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ğ‘ƒğ‘Ÿğ‘ğ‘¦ğ‘’ğ‘Ÿ ğ‘“ğ‘œğ‘Ÿ ğ‘Ÿğ‘–ğ‘”â„ğ‘¡ğ‘’ğ‘œğ‘¢ğ‘  ğ‘â„ğ‘–ğ‘™ğ‘‘ğ‘Ÿğ‘’ğ‘›",
            body: "ğŸ“œ ğ‘…ğ‘ğ‘ğ‘ğ‘– â„ğ‘ğ‘ ğ‘™ğ‘– ğ‘šğ‘–ğ‘› ğ‘™ğ‘ğ‘‘ğ‘¢ğ‘›ğ‘˜ğ‘ ğ‘§ğ‘¢ğ‘Ÿğ‘Ÿğ‘–ğ‘¦ğ‘¦ğ‘ğ‘¡ğ‘ğ‘› ğ‘¡ğ‘ğ‘¦ğ‘¦ğ‘–ğ‘ğ‘ğ‘¡ğ‘ğ‘› ğ‘–ğ‘›ğ‘›ğ‘ğ‘˜ğ‘ ğ‘ ğ‘ğ‘šğ‘–ğ‘¢ğ‘‘ ğ‘‘ğ‘¢ğ‘ğ‘–.\n\nğŸ’« ğ‘€ğ‘’ğ‘ğ‘›ğ‘–ğ‘›ğ‘”: 'ğ‘€ğ‘¦ ğ¿ğ‘œğ‘Ÿğ‘‘! ğºğ‘Ÿğ‘ğ‘›ğ‘¡ ğ‘šğ‘’ ğ‘“ğ‘Ÿğ‘œğ‘š ğ‘Œğ‘œğ‘¢ğ‘Ÿğ‘ ğ‘’ğ‘™ğ‘“ ğ‘ ğ‘”ğ‘œğ‘œğ‘‘ ğ‘œğ‘“ğ‘“ğ‘ ğ‘ğ‘Ÿğ‘–ğ‘›ğ‘”. ğ‘Œğ‘œğ‘¢ ğ‘ğ‘Ÿğ‘’ ğ‘¡â„ğ‘’ ğ»ğ‘’ğ‘ğ‘Ÿğ‘’ğ‘Ÿ ğ‘œğ‘“ ğ‘ ğ‘¢ğ‘ğ‘ğ‘™ğ‘–ğ‘ğ‘ğ‘¡ğ‘–ğ‘œğ‘›.'",
            image: "https://i.imgur.com/LH2qVcm.jpeg"
        },
        {
            title: "ğŸ•Œ ğºğ‘Ÿğ‘ğ‘£ğ‘’ ğ‘£ğ‘–ğ‘ ğ‘–ğ‘¡ ğ‘ğ‘Ÿğ‘œğ‘ğ‘’ğ‘‘ğ‘¢ğ‘Ÿğ‘’",
            body: "âœ¨ ğºğ‘Ÿğ‘ğ‘£ğ‘’ ğ‘£ğ‘–ğ‘ ğ‘–ğ‘¡ ğ‘ğ‘Ÿğ‘œğ‘ğ‘’ğ‘‘ğ‘¢ğ‘Ÿğ‘’:\n\nâ€¢ 1ğ‘¥ ğ‘†ğ‘¢ğ‘Ÿğ‘â„ ğ´ğ‘™-ğ¹ğ‘ğ‘¡ğ‘–â„ğ‘\nâ€¢ 1ğ‘¥ ğ‘†ğ‘¢ğ‘Ÿğ‘â„ ğ´ğ‘›-ğ‘ğ‘ğ‘ \nâ€¢ 1ğ‘¥ ğ‘†ğ‘¢ğ‘Ÿğ‘â„ ğ´ğ‘™-ğ¹ğ‘ğ‘™ğ‘ğ‘\nâ€¢ 3ğ‘¥ ğ‘†ğ‘¢ğ‘Ÿğ‘â„ ğ´ğ‘™-ğ¼ğ‘˜â„ğ‘™ğ‘ğ‘ \nâ€¢ 1ğ‘¥ ğ‘†ğ‘¢ğ‘Ÿğ‘â„ ğ´ğ‘™-ğ¾ğ‘ğ‘“ğ‘–ğ‘Ÿğ‘¢ğ‘›\nâ€¢ 2ğ‘¥ ğ‘†ğ‘¢ğ‘Ÿğ‘â„ ğ´ğ‘¡-ğ‘‡ğ‘ğ‘˜ğ‘ğ‘¡â„ğ‘¢ğ‘Ÿ\nâ€¢ 11ğ‘¥ ğ·ğ‘¢ğ‘Ÿğ‘¢ğ‘‘ ğ‘†â„ğ‘ğ‘Ÿğ‘–ğ‘“\nâ€¢ 11ğ‘¥ ğ´ğ‘ ğ‘¡ğ‘ğ‘”â„ğ‘“ğ‘–ğ‘Ÿğ‘¢ğ‘™ğ‘™ğ‘â„\n\nğŸ’« ğ´ğ‘™ğ‘¤ğ‘ğ‘¦ğ‘  ğ‘“ğ‘ğ‘ğ‘’ ğ‘¤ğ‘’ğ‘ ğ‘¡ ğ‘¤â„ğ‘–ğ‘™ğ‘’ ğ‘ğ‘Ÿğ‘ğ‘¦ğ‘–ğ‘›ğ‘”",
            image: "https://i.imgur.com/28Et6s2.jpeg"
        },
        {
            title: "ğŸ“¿ ğºğ‘’ğ‘›ğ‘’ğ‘Ÿğ‘ğ‘™ ğ‘ğ‘Ÿğ‘ğ‘¦ğ‘’ğ‘Ÿ",
            body: "ğŸ“œ ğ´ğ‘™ğ‘™ğ‘â„ğ‘¢ğ‘šğ‘šğ‘ ğ‘–ğ‘›ğ‘›ğ‘– ğ‘ğ‘ ğ‘ğ‘™ğ‘¢ğ‘˜ğ‘ ğ‘¡â„-ğ‘¡â„ğ‘ğ‘ğ‘ğ‘¡ğ‘ ğ‘“ğ‘–ğ‘™ ğ‘ğ‘šğ‘Ÿğ‘– ğ‘¤ğ‘ğ‘™ ğ‘ğ‘§ğ‘–ğ‘šğ‘ğ‘¡ğ‘ ğ‘ğ‘™ğ‘ ğ‘Ÿ-ğ‘Ÿğ‘¢ğ‘ â„ğ‘‘ğ‘–.\n\nğŸ’« ğ‘€ğ‘’ğ‘ğ‘›ğ‘–ğ‘›ğ‘”: 'ğ‘‚ ğ´ğ‘™ğ‘™ğ‘â„! ğ¼ ğ‘ğ‘ ğ‘˜ ğ‘Œğ‘œğ‘¢ ğ‘“ğ‘œğ‘Ÿ ğ‘ ğ‘¡ğ‘’ğ‘ğ‘‘ğ‘“ğ‘ğ‘ ğ‘¡ğ‘›ğ‘’ğ‘ ğ‘  ğ‘–ğ‘› ğ‘‘ğ‘’ğ‘ğ‘–ğ‘ ğ‘–ğ‘œğ‘›ğ‘  ğ‘ğ‘›ğ‘‘ ğ‘‘ğ‘’ğ‘¡ğ‘’ğ‘Ÿğ‘šğ‘–ğ‘›ğ‘ğ‘¡ğ‘–ğ‘œğ‘› ğ‘–ğ‘› ğ‘Ÿğ‘–ğ‘”â„ğ‘¡ğ‘’ğ‘œğ‘¢ğ‘ ğ‘›ğ‘’ğ‘ ğ‘ .'",
            image: "https://i.imgur.com/NIjfdfz.jpeg"
        }
    ];

    if (args[0] && !isNaN(args[0])) {
        const choice = parseInt(args[0]);
        if (choice < 1 || choice > doyaContent.length) {
            return message.reply(`âš ï¸ ğ¼ğ‘›ğ‘£ğ‘ğ‘™ğ‘–ğ‘‘ ğ‘ ğ‘’ğ‘™ğ‘’ğ‘ğ‘¡ğ‘–ğ‘œğ‘›! ğ‘ƒğ‘™ğ‘’ğ‘ğ‘ ğ‘’ ğ‘¤ğ‘Ÿğ‘–ğ‘¡ğ‘’ ğ‘ ğ‘›ğ‘¢ğ‘šğ‘ğ‘’ğ‘Ÿ ğ‘ğ‘’ğ‘¡ğ‘¤ğ‘’ğ‘’ğ‘› 1-${doyaContent.length}.`, threadID, messageID);
        }
        
        const doya = doyaContent[choice - 1];
        try {
            const imageStream = await global.utils.getStreamFromURL(doya.image);
            return message.reply({
                body: `${doya.title}\n\n${doya.body}`,
                attachment: imageStream
            }, threadID, messageID);
        } catch (error) {
            console.error("ğ¸ğ‘Ÿğ‘Ÿğ‘œğ‘Ÿ ğ‘ ğ‘’ğ‘›ğ‘‘ğ‘–ğ‘›ğ‘” ğ‘ğ‘Ÿğ‘ğ‘¦ğ‘’ğ‘Ÿ:", error);
            return message.reply("âš ï¸ ğ¶ğ‘œğ‘¢ğ‘™ğ‘‘ ğ‘›ğ‘œğ‘¡ ğ‘ ğ‘’ğ‘›ğ‘‘ ğ‘ğ‘Ÿğ‘ğ‘¦ğ‘’ğ‘Ÿ, ğ‘ğ‘™ğ‘’ğ‘ğ‘ ğ‘’ ğ‘¡ğ‘Ÿğ‘¦ ğ‘ğ‘”ğ‘ğ‘–ğ‘› ğ‘™ğ‘ğ‘¡ğ‘’ğ‘Ÿ", threadID, messageID);
        }
    }
    
    let menuMessage = "ğŸ“– ğ¼ğ‘ ğ‘™ğ‘ğ‘šğ‘–ğ‘ ğ‘ƒğ‘Ÿğ‘ğ‘¦ğ‘’ğ‘Ÿ ğ¶ğ‘œğ‘™ğ‘™ğ‘’ğ‘ğ‘¡ğ‘–ğ‘œğ‘›:\n\n";
    doyaContent.forEach((doya, index) => {
        menuMessage += `${index + 1}. ${doya.title}\n`;
    });
    
    menuMessage += "\nğŸ’« ğ‘Šğ‘Ÿğ‘–ğ‘¡ğ‘’ ğ‘¦ğ‘œğ‘¢ğ‘Ÿ ğ‘ğ‘Ÿğ‘’ğ‘“ğ‘’ğ‘Ÿğ‘Ÿğ‘’ğ‘‘ ğ‘ğ‘Ÿğ‘ğ‘¦ğ‘’ğ‘Ÿ ğ‘›ğ‘¢ğ‘šğ‘ğ‘’ğ‘Ÿ (1-8)";
    message.reply(menuMessage, threadID, messageID);
};
