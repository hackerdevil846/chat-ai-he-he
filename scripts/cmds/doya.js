const axios = require('axios');
const fs = require('fs-extra');

module.exports = {
  config: {
    name: "doya",
    version: "1.0.0",
    hasPermission: 0,
    credits: "Asif",
    description: "ржЗрж╕рж▓рж╛ржорж┐ржХ ржжрзЛржпрж╝рж╛рж░ рж╕ржВржЧрзНрж░рж╣",
    category: "islam",
    usages: "[ржжрзЛржпрж╝рж╛рж░ ржиржорзНржмрж░]",
    cooldowns: 5,
    dependencies: {
      "axios": "",
      "fs-extra": ""
    }
  },

  onStart: async function ({ api, event, args }) {
    const { threadID } = event;
    const doyaContent = [
      {
        title: "ржИржорж╛ржирзЗрж░ рж╕рж╛ржерзЗ ржорзГрждрзНржпрзБ ржмрж░ржг ржХрж░рж╛рж░ ржжрзЛржпрж╝рж╛",
        body: "рж╣рзЗ ржЖржорж╛ржжрзЗрж░ ржкрж╛рж▓ржиржХрж░рзНрждрж╛, ржЖржорж╛ржжрзЗрж░ ржЧрзБржирж╛рж╣рж╕ржорзВрж╣ ржорж╛ржл ржХрж░рзЗ ржжрж╛ржУ, ржЖржорж╛ржжрзЗрж░ ржерзЗржХрзЗ рж╕ржХрж▓ ржоржирзНржж ржжрзВрж░ ржХрж░рзЗ ржжрж╛ржУ ржПржмржВ ржЖржорж╛ржжрзЗрж░ ржирзЗржХ рж▓рзЛржХржжрзЗрж░ рж╕рж╛рж╣ржЪрж╛рж░рзНржп ржжрж╛ржи ржХрж░ред",
        image: "https://i.imgur.com/aESlOKd.jpeg"
      },
      {
        title: "ржЙрждрзНрждржо ржЬрзАржмржирж╕ржЩрзНржЧрзА рж▓рж╛ржнрзЗрж░ ржжрзЛрзЯрж╛",
        body: "╪▒┘О╪и┘С┘О┘Ж┘О╪з ┘З┘О╪и┘Т ┘Д┘О┘Ж┘О╪з ┘Е┘Р┘Ж┘Т ╪г┘О╪▓┘Т┘И┘О╪з╪м┘Р┘Ж┘О╪з ┘И┘О╪░┘П╪▒┘С┘Р┘К┘С┘О╪з╪к┘Р┘Ж┘О╪з ┘В┘П╪▒┘С┘О╪й┘О ╪г┘О╪╣┘Т┘К┘П┘Ж┘Н ┘И┘О╪з╪м┘Т╪╣┘О┘Д┘Т┘Ж┘О╪з ┘Д┘Р┘Д┘Т┘Е┘П╪к┘С┘О┘В┘Р┘К┘Ж┘О ╪е┘Р┘Е┘О╪з┘Е┘Л╪з\n\nржЙржЪрзНржЪрж╛рж░ржг: 'рж░рж╛ржмрзНржмрж╛ржирж╛ рж╣рж╛ржмрзНрж▓рж╛ржирж╛ ржорж┐ржи ржЖржпржУрзЯрж╛ржЭрж┐ржирж╛ ржУрзЯрж╛ ржЬрзБрж░рзНрж░рж┐рзЯрж╛рждрж┐ржирж╛ ржХрзБрж░рзНрж░рж╛рждрж╛ ржЖржЗрзЯрзБржирж┐ржУ ржУрзЯрж╛ржЭржЖрж▓ржирж╛ рж▓рж┐рж▓ржорзБрждрзНрждрж╛ржХрзНржмрж┐ржирж╛ ржЗржорж╛ржорж╛ред'",
        image: "https://i.imgur.com/3Bmg4Nd.jpeg"
      },
      {
        title: "рж╕рж╣ржмрж╛рж╕ ржХрж░рж╛рж░ ржжрзЛрзЯрж╛",
        body: "╪и┘Р╪│┘Т┘Е┘Р ╪з┘Д┘Д┘С┘З┘Р ╪з┘Д┘Д┘С┘З┘П┘Е┘О┘С ╪м┘О┘Ж┘Р┘С╪и┘Т┘Ж┘О╪з ╪з┘Д╪┤┘О┘С┘К┘Т╪╖┘О╪з┘Ж┘О ┘И┘О ╪м┘О┘Ж┘Р┘С╪и┘Р ╪з┘Д╪┤┘О┘С┘К┘Т╪╖┘О╪з┘Ж┘О ┘Е┘О╪з ╪▒┘О╪▓┘О┘В┘Т╪к┘О┘Ж┘О╪з\n\nржЙржЪрзНржЪрж╛рж░ржг: 'ржмрж┐рж╕ржорж┐рж▓рзНрж▓рж╛рж╣рж┐ ржЖрж▓рзНрж▓рж╛рж╣рзБржорзНржорж╛ ржЬрж╛ржирзНржирж┐ржмржирж╛рж╢ рж╢рж╛ржпрж╝рждрзНржмрж╛ржирж╛ ржУржпрж╝рж╛ ржЬрж╛ржирзНржирж┐ржмрж┐рж╢ рж╢рж╛ржпрж╝рждрзНржмрж╛ржирж╛ ржорж╛ рж░рж╛ржпрж╛ржХрзНржмрждрж╛ржирж╛ред' ржЕрж░рзНрже: 'ржЖрж▓рзНрж▓рж╛рж╣рж░ ржирж╛ржорзЗ рж╢рзБрж░рзБ ржХрж░ржЫрж┐, рж╣рзЗ ржЖрж▓рзНрж▓рж╛рж╣! ржЖржорж╛ржжрзЗрж░ржХрзЗ рждрзБржорж┐ рж╢ржпрж╝рждрж╛ржи ржерзЗржХрзЗ ржжрзВрж░рзЗ рж░рж╛ржЦред'",
        image: "https://i.imgur.com/TUm1LQW.jpeg"
      },
      {
        title: "ржЖрж▓рзНрж▓рж╛рж╣рж░ ржЧржпржм ржерзЗржХрзЗ ржорзБржХрзНржд ржерж╛ржХрж╛рж░ ржжрзЛржпрж╝рж╛",
        body: "╪з┘Д┘Д┘С┘О┘З┘П┘Е┘С┘О ┘В┘Р┘Ж┘Р┘К ╪╣┘О╪░┘О╪з╪и┘О┘Г┘О ┘К┘О┘И┘Т┘Е┘О ╪к┘О╪м┘Т┘Е┘О╪╣┘П ╪╣┘Р╪и┘О╪з╪п┘О┘Г┘О ╪г┘О┘И┘Т ╪к┘О╪и┘Т╪╣┘О╪л┘П ╪╣┘Р╪и┘О╪з╪п┘О┘Г┘О\n\nржЙржЪрзНржЪрж╛рж░ржг: 'ржЖрж▓рзНрж▓рж╛рж╣рзБржорзНржорж╛ ржХрзНржмрж┐ржирж┐ ржЖржЬрж╛ржмрж╛ржХрж╛ ржЗрзЯрж╛ржУржорж╛ рждрж╛ржЭржорж╛ржЙ ржЗржмрж╛ржжрж╛ржХрж╛ ржЖржУ рждрж╛ржмржЖржЫрзБ ржЗржмрж╛ржжрж╛ржХрж╛ред' ржЕрж░рзНрже: 'рж╣рзЗ ржЖрж▓рзНрж▓рж╛рж╣! ржпрзЗржжрж┐ржи рждрзБржорж┐ рждрзЛржорж╛рж░ ржмрж╛ржирзНржжрж╛ржжрзЗрж░ ржПржХрждрзНрж░рж┐ржд ржХрж░ржмрзЗ ржЕржержмрж╛ ржкрзБржирж░рж╛рзЯ ржЬрзАржмрж┐ржд ржХрж░ржмрзЗ; рж╕рзЗржжрж┐ржи ржЖржорж╛ржХрзЗ рждрзЛржорж╛рж░ ржЖржЬрж╛ржм ржерзЗржХрзЗ рж╣рзЗржлрж╛ржЬрждрзЗ рж░рж╛ржЦред'",
        image: "https://i.imgur.com/wp7hM0m.jpeg"
      },
      {
        title: "ржХрзНрж╖ржорж╛ ржУ рж░рж╣ржорждрзЗрж░ ржжрзЛржпрж╝рж╛",
        body: "╪▒┘О╪и┘С┘О┘Ж┘О╪з█д ╪з┘░┘Е┘О┘Ж┘С┘О╪з ┘Б┘О╪з╪║█б┘Б┘Р╪▒█б ┘Д┘О┘Ж┘О╪з ┘И┘О ╪з╪▒█б╪н┘О┘Е█б┘Ж┘О╪з ┘И┘О ╪з┘О┘Ж█б╪к┘О ╪о┘О█М█б╪▒┘П ╪з┘Д╪▒┘С┘░╪н┘Р┘Е┘Р█М█б┘Ж┘О\n\nржЙржЪрзНржЪрж╛рж░ржг: рж░рж╛ржмрзНржмрж╛ржирж╛ ржЖржорж╛ржирзНржирж╛ ржлрж╛ржЧржлрж┐рж░рж▓рж╛ржирж╛ ржУрзЯрж╛рж░рж╣рж╛ржоржирж╛ ржУрзЯрж╛ ржЖржВрждрж╛ ржЦрж╛ржЗрж░рзБрж░ рж░рж╛рж╣рж┐ржорж┐ржиред",
        image: "https://i.imgur.com/pFvUmsm.jpeg"
      },
      {
        title: "рж╕рзБрж╕ржирзНрждрж╛ржи рж▓рж╛ржнрзЗрж░ ржжрзЛрзЯрж╛",
        body: "╪▒┘О╪и┘С┘Р ┘З┘О╪и┘Т ┘Д┘Р┘К ┘Е┘Р┘Ж ┘Д┘С┘О╪п┘П┘Ж┘Т┘Г┘О ╪░┘П╪▒┘С┘Р┘К┘С┘О╪й┘Л ╪╖┘О┘К┘С┘Р╪и┘О╪й┘Л ╪е┘Р┘Ж┘С┘О┘Г┘О ╪│┘О┘Е┘Р┘К╪╣┘П ╪з┘Д╪п┘С┘П╪╣┘О╪з╪б\n\nржЙржЪрзНржЪрж╛рж░ржг: рж░рж╛ржмрзНржмрж┐ рж╣рж╛ржмрж▓рж┐ ржорж┐рж▓рзНрж▓рж╛ржжрзБржи┘Г╪з ╪░┘П╪▒┘С┘Р┘К┘С┘О╪й┘Л ╪╖┘О┘К┘С┘Р╪и┘О╪й┘Л ╪е┘Р┘Ж┘С┘О┘Г┘О ╪│┘О┘Е┘Р┘К╪╣┘П ╪з┘Д╪п┘С┘П╪╣┘О╪з╪б\n\nржЕрж░рзНрже: рж╣рзЗ ржЖржорж╛ржжрзЗрж░ ржкрзНрж░рждрж┐ржкрж╛рж▓ржХ! рждрзЛржорж╛рж░ ржкржХрзНрж╖ ржерзЗржХрзЗ ржЖржорж╛ржХрзЗ ржкрзВрждржкржмрж┐рждрзНрж░ рж╕ржирзНрждрж╛ржи ржжрж╛ржи ржХрж░рзЛред ржирж┐рж╢рзНржЪрзЯржЗ рждрзБржорж┐ ржкрзНрж░рж╛рж░рзНржержирж╛ ржХржмрзБрж▓ржХрж╛рж░рзАред",
        image: "https://i.imgur.com/LH2qVcm.jpeg"
      },
      {
        title: "ржХржмрж░ ржЬрж┐рзЯрж╛рж░рждрзЗрж░ ржирж┐рзЯржо",
        body: "ржХржмрж░ ржЬрж┐рзЯрж╛рж░ржд ржПрж░ ржирж┐рзЯржо:\n\nтАв рзз ржмрж╛рж░ рж╕рзВрж░рж╛ ржлрж╛рждрж┐рж╣рж╛\nтАв рзз ржмрж╛рж░ рж╕рзВрж░рж╛ ржЖржи ржирж╛рж╕\nтАв рзз ржмрж╛рж░ рж╕рзВрж░рж╛ ржлрж╛рж▓рж╛ржХ\nтАв рзй ржмрж╛рж░ рж╕рзВрж░рж╛ ржЗржЦрж▓рж╛рж╕\nтАв рзз ржмрж╛рж░ рж╕рзВрж░рж╛ ржХрж╛ржлрж┐рж░рзБржи\nтАв рзи ржмрж╛рж░ рж╕рзВрж░рж╛ рждрж╛ржХрж╛ржЫрзБрж░\nтАв рззрзз ржмрж╛рж░ ржжрзБрж░рзБржж рж╢рж░рзАржл\nтАв рззрзз ржмрж╛рж░ ржЖрж╕рзНрждрж╛ржЧржлрж┐рж░рзБрж▓рзНрж▓рж╛рж╣\n\nржЖрж░ ржЕржмрж╢рзНржпржЗ ржкрж╢рзНржЪрж┐ржо ржжрж┐ржХрзЗ рждрж╛ржХрж┐рзЯрзЗ ржжрзЛрзЯрж╛ ржкрзЬржмрзЗржи",
        image: "https://i.imgur.com/28Et6s2.jpeg"
      },
      {
        title: "рж╕рж╛ржзрж╛рж░ржг ржжрзЛржпрж╝рж╛",
        body: "╪з┘Д┘Д┘С┘░┘З┘П┘Е┘С┘О ╪е┘Р┘Ж┘С┘Р┘К┘Т█д ╪г┘О╪│┘Т╪ж┘О┘Д┘П┘Г┘О ╪з┘Д╪л┘С┘О╪и┘О╪з╪к┘О ┘Б┘Р┘К ╪з┘Д┘Т╪г┘О┘Е┘Т╪▒┘Р╪М ┘И┘О╪г┘О╪│┘Т╪г┘О┘Д┘П┘Г ╪╣┘О╪▓┘Р┘К┘Т┘Е┘О╪й┘О ╪з┘Д╪▒┘С┘П╪┤┘Т╪п┘Р╪М ┘И┘О╪г┘О╪│┘Т╪г┘О┘Д┘П┘Г┘О ╪┤┘П┘Г┘Т╪▒┘О ┘Ж┘Р╪╣┘Т┘Е┘О╪к┘Р┘Г┘О ┘И┘О╪н┘П╪│┘Т┘Ж┘О ╪╣┘Р╪и┘О╪з╪п┘О╪к┘Р┘Г┘О\n\nржЕрж░рзНрже: ржЗрзЯрж╛ ржЖрж▓рзНрж▓рж╛рж╣! ржЖржорж┐ ржЖржкржирж╛рж░ ржХрж╛ржЫрзЗ ржкрзНрж░рж╛рж░рзНржержирж╛ ржХрж░рж┐ ржжрзАржирзЗрж░ ржмрж┐рж╖рзЯрзЗ ржЕржмрж┐ржЪрж▓рждрж╛ ржПржмржВ ржЖржкржирж╛рж░ ржХрж╛ржЫрзЗ ржкрзНрж░рж╛рж░рзНржержирж╛ ржХрж░рж┐ ржЙржирзНржиржд ржпрзЛржЧрзНржпрждрж╛ ржПржмржВ ржЖржкржирж╛рж░ ржХрж╛ржЫрзЗ ржкрзНрж░рж╛рж░рзНржержирж╛ ржХрж░рж┐ ржЖржкржирж╛рж░ ржирзЗрзЯрж╛ржорждрзЗрж░ рж╢рзЛржХрж░ржЧрзЛржЬрж╛рж░рж┐ ржУ ржмржирзНржжрзЗржЧрзАрж░ рж╕рзМржирзНржжрж░рзНржп",
        image: "https://i.imgur.com/NIjfdfz.jpeg"
      }
    ];

    if (args[0] && !isNaN(args[0])) {
      const choice = parseInt(args[0]);
      if (choice < 1 || choice > doyaContent.length) {
        return api.sendMessage(`тЪая╕П ржЕржмрзИржз ржирж┐рж░рзНржмрж╛ржЪржи! ржжржпрж╝рж╛ ржХрж░рзЗ 1-${doyaContent.length} ржПрж░ ржоржзрзНржпрзЗ ржПржХржЯрж┐ ржиржорзНржмрж░ рж▓рж┐ржЦрзБржиред`, threadID);
      }
      
      const doya = doyaContent[choice - 1];
      try {
        const imageStream = await global.utils.getStreamFromURL(doya.image);
        return api.sendMessage({
          body: `ЁЯУЦ ${doya.title}\n\n${doya.body}`,
          attachment: imageStream
        }, threadID);
      } catch (error) {
        console.error("ржжрзЛржпрж╝рж╛ ржкрж╛ржарж╛рждрзЗ рж╕ржорж╕рзНржпрж╛:", error);
        return api.sendMessage("тЪая╕П ржжрзЛржпрж╝рж╛ ржкрж╛ржарж╛ржирзЛ рж╕ржорзНржнржм рж╣ржпрж╝ржирж┐, ржкрж░рзЗ ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржи", threadID);
      }
    }
    
    let menuMessage = "ЁЯУЦ ржЗрж╕рж▓рж╛ржорж┐ржХ ржжрзЛржпрж╝рж╛ рж╕ржВржЧрзНрж░рж╣:\n\n";
    doyaContent.forEach((doya, index) => {
      menuMessage += `${index + 1}. ${doya.title}\n`;
    });
    
    menuMessage += "\nЁЯСЙ ржЖржкржирж╛рж░ ржкржЫржирзНржжрзЗрж░ ржжрзЛржпрж╝рж╛рж░ ржиржорзНржмрж░ржЯрж┐ рж▓рж┐ржЦрзБржи (1-8)";
    api.sendMessage(menuMessage, threadID);
  }
};
