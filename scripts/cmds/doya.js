const axios = require('axios');
const fs = require('fs-extra');

module.exports = {
  config: {
    name: "doya",
    version: "1.0.0",
    hasPermssion: 0,
    credits: "ЁЭСиЁЭТФЁЭТКЁЭТЗ ЁЭС┤ЁЭТВЁЭТЙЁЭТОЁЭТЦЁЭТЕ",
    description: "ржЗрж╕рж▓рж╛ржорж┐ржХ ржжрзЛржпрж╝рж╛рж░ рж╕ржВржЧрзНрж░рж╣",
    category: "islam",
    usages: "[ржжрзЛржпрж╝рж╛рж░ ржиржорзНржмрж░]",
    cooldowns: 5,
    dependencies: {
      "axios": "",
      "fs-extra": ""
    }
  },

  run: async function({ api, event, args }) {
    const { threadID, messageID } = event;
    const doyaContent = [
      {
        title: "ЁЯУЦ ржИржорж╛ржирзЗрж░ рж╕рж╛ржерзЗ ржорзГрждрзНржпрзБ ржмрж░ржг ржХрж░рж╛рж░ ржжрзЛржпрж╝рж╛",
        body: "тЬи рж╣рзЗ ржЖржорж╛ржжрзЗрж░ ржкрж╛рж▓ржиржХрж░рзНрждрж╛, ржЖржорж╛ржжрзЗрж░ ржЧрзБржирж╛рж╣рж╕ржорзВрж╣ ржорж╛ржл ржХрж░рзЗ ржжрж╛ржУ, ржЖржорж╛ржжрзЗрж░ ржерзЗржХрзЗ рж╕ржХрж▓ ржоржирзНржж ржжрзВрж░ ржХрж░рзЗ ржжрж╛ржУ ржПржмржВ ржЖржорж╛ржжрзЗрж░ ржирзЗржХ рж▓рзЛржХржжрзЗрж░ рж╕рж╛рж╣ржЪрж╛рж░рзНржп ржжрж╛ржи ржХрж░ред",
        image: "https://i.imgur.com/aESlOKd.jpeg"
      },
      {
        title: "ЁЯМ║ ржЙрждрзНрждржо ржЬрзАржмржирж╕ржЩрзНржЧрзА рж▓рж╛ржнрзЗрж░ ржжрзЛрзЯрж╛",
        body: "ЁЯУЬ рж░рж╛ржмрзНржмрж╛ржирж╛ рж╣рж╛ржмрзНрж▓рж╛ржирж╛ ржорж┐ржи ржЖржпржУрзЯрж╛ржЭрж┐ржирж╛ ржУрзЯрж╛ ржЬрзБрж░рзНрж░рж┐рзЯрж╛рждрж┐ржирж╛ ржХрзБрж░рзНрж░рж╛рждрж╛ ржЖржЗрзЯрзБржирж┐ржУ ржУрзЯрж╛ржЭржЖрж▓ржирж╛ рж▓рж┐рж▓ржорзБрждрзНрждрж╛ржХрзНржмрж┐ржирж╛ ржЗржорж╛ржорж╛ред\n\nЁЯТл ржЕрж░рзНрже: 'рж╣рзЗ ржЖржорж╛ржжрзЗрж░ рж░ржм! ржЖржорж╛ржжрзЗрж░ржХрзЗ ржЖржорж╛ржжрзЗрж░ рж╕рзНрждрзНрж░рзА ржУ рж╕ржирзНрждрж╛ржи-рж╕ржирзНрждрждрж┐рж░ ржоржзрзНржпрзЗ ржЪрзЛржЦрзЗрж░ рж╢рзАрждрж▓рждрж╛ ржжрж╛ржи ржХрж░рзБржи ржПржмржВ ржЖржорж╛ржжрзЗрж░ржХрзЗ ржорзБрждрзНрждрж╛ржХрзАржжрзЗрж░ ржирзЗрждрж╛ ржмрж╛ржирж┐ржпрж╝рзЗ ржжрж┐ржиред'",
        image: "https://i.imgur.com/3Bmg4Nd.jpeg"
      },
      {
        title: "тЭдя╕П рж╕рж╣ржмрж╛рж╕ ржХрж░рж╛рж░ ржжрзЛрзЯрж╛",
        body: "ЁЯУЬ ржмрж┐рж╕ржорж┐рж▓рзНрж▓рж╛рж╣рж┐ ржЖрж▓рзНрж▓рж╛рж╣рзБржорзНржорж╛ ржЬрж╛ржирзНржирж┐ржмржирж╛рж╢ рж╢рж╛ржпрж╝рждрзНржмрж╛ржирж╛ ржУржпрж╝рж╛ ржЬрж╛ржирзНржирж┐ржмрж┐рж╢ рж╢рж╛ржпрж╝╪крзНржмрж╛ржирж╛ ржорж╛ рж░рж╛ржпрж╛ржХрзНржмрждрж╛ржирж╛ред\n\nЁЯТл ржЕрж░рзНрже: 'ржЖрж▓рзНрж▓рж╛рж╣рж░ ржирж╛ржорзЗ рж╢рзБрж░рзБ ржХрж░ржЫрж┐, рж╣рзЗ ржЖрж▓рзНрж▓рж╛рж╣! ржЖржорж╛ржжрзЗрж░ржХрзЗ рждрзБржорж┐ рж╢ржпрж╝рждрж╛ржи ржерзЗржХрзЗ ржжрзВрж░рзЗ рж░рж╛ржЦред'",
        image: "https://i.imgur.com/TUm1LQW.jpeg"
      },
      {
        title: "ЁЯХЛ ржЖрж▓рзНрж▓рж╛рж╣рж░ ржЧржпржм ржерзЗржХрзЗ ржорзБржХрзНржд ржерж╛ржХрж╛рж░ ржжрзЛржпрж╝рж╛",
        body: "ЁЯУЬ ржЖрж▓рзНрж▓рж╛рж╣рзБржорзНржорж╛ ржХрзНржмрж┐ржирж┐ ржЖржЬрж╛ржмрж╛ржХрж╛ ржЗрзЯрж╛ржУржо╪з ╪к┘О╪и┘Т╪╣┘О╪л┘П ╪╣┘Р╪и┘О╪з╪п┘О┘Г┘О\n\nЁЯТл ржЕрж░рзНрже: 'рж╣рзЗ ржЖрж▓рзНрж▓рж╛рж╣! ржпрзЗржжрж┐ржи рждрзБржорж┐ рждрзЛржорж╛рж░ ржмрж╛ржирзНржжрж╛ржжрзЗрж░ ржкрзБржирж░рж╛рзЯ ржЬрзАржмрж┐ржд ржХрж░ржмрзЗ; рж╕рзЗржжрж┐ржи ржЖржорж╛ржХрзЗ рждрзЛржорж╛рж░ ржЖржЬрж╛ржм ржерзЗржХрзЗ рж╣рзЗржлрж╛ржЬрждрзЗ рж░рж╛ржЦред'",
        image: "https://i.imgur.com/wp7hM0m.jpeg"
      },
      {
        title: "ЁЯМЩ ржХрзНрж╖ржорж╛ ржУ рж░рж╣ржорждрзЗрж░ ржжрзЛржпрж╝рж╛",
        body: "ЁЯУЬ рж░рж╛ржмрзНржмрж╛ржирж╛ ржЖржорж╛ржирзНржирж╛ ржлрж╛ржЧржлрж┐рж░рж▓рж╛ржирж╛ ржУрзЯрж╛рж░рж╣рж╛ржоржирж╛ ржУрзЯрж╛ ржЖржВрждрж╛ ржЦрж╛ржЗ╪▒рзБрж░ рж░рж╛рж╣рж┐ржорж┐ржиред\n\nЁЯТл ржЕрж░рзНрже: 'рж╣рзЗ ржЖржорж╛ржжрзЗрж░ рж░ржм! ржЖржорж░рж╛ ржИржорж╛ржи ржПржирзЗржЫрж┐, рждрж╛ржЗ ржЖржорж╛ржжрзЗрж░ржХрзЗ ржХрзНрж╖ржорж╛ ржХрж░рзБржи ржУ ржЖржорж╛ржжрзЗрж░ ржЙржкрж░ рж░рж╣ржо ржХрж░рзБржи ржПржмржВ ржЖржкржирж┐ рж╕рж░рзНржмрж╢рзНрж░рзЗрж╖рзНржа ржжржпрж╝рж╛рж▓рзБред'",
        image: "https://i.imgur.com/pFvUmsm.jpeg"
      },
      {
        title: "ЁЯСитАНЁЯСйтАНЁЯСзтАНЁЯСж рж╕рзБрж╕ржирзНрждрж╛ржи рж▓рж╛ржнрзЗрж░ ржжрзЛрзЯрж╛",
        body: "ЁЯУЬ рж░рж╛ржмрзНржмрж┐ рж╣рж╛ржмрж▓рж┐ ржорж┐рж▓рзНрж▓рж╛ржжрзБржиржХрж╛ ржпрзБрж░рж░рж┐ржпрж╝рзНржпрж╛рждрж╛ржи рждрж╛ржпрж╝рзНржпрж┐ржмрж╛рж╣, ржЗржирзНржирж╛ржХрж╛ рж╕рж╛ржорзА'ржЙржж ржжрзБ'ржЖ\n\nЁЯТл ржЕрж░рзНрже: 'рж╣рзЗ ржЖржорж╛рж░ рж░ржм! ржЖржкржирж╛рж░ ржкржХрзНрж╖ ржерзЗржХрзЗ ржЖржорж╛ржХрзЗ ржкржмрж┐рждрзНрж░ рж╕ржирзНрждрж╛ржи ржжрж╛ржи ржХрж░рзБржи, ржирж┐рж╢рзНржЪржпрж╝ржЗ ржЖржкржирж┐ ржкрзНрж░рж╛рж░рзНржержирж╛ рж╢рзНрж░ржмржгржХрж╛рж░рзАред'",
        image: "https://i.imgur.com/LH2qVcm.jpeg"
      },
      {
        title: "ЁЯХМ ржХржмрж░ ржЬрж┐рзЯрж╛рж░рждрзЗрж░ ржирж┐рзЯржо",
        body: "тЬи ржХржмрж░ ржЬрж┐рзЯрж╛рж░ржд ржПрж░ ржирж┐рзЯржо:\n\nтАв рзз ржмрж╛рж░ рж╕рзВрж░рж╛ ржлрж╛рждрж┐рж╣рж╛\nтАв рзз ржмрж╛рж░ рж╕рзВрж░рж╛ ржЖржи ржирж╛рж╕\nтАв рзз ржмрж╛рж░ рж╕рзВрж░рж╛ ржлрж╛рж▓рж╛ржХ\nтАв рзй ржмрж╛рж░ рж╕рзВрж░рж╛ ржЗржЦрж▓рж╛рж╕\nтАв рзз ржмрж╛рж░ рж╕рзВрж░рж╛ ржХрж╛ржлрж┐рж░рзБржи\nтАв рзи ржмрж╛рж░ рж╕рзВрж░рж╛ рждрж╛ржХрж╛ржЫрзБрж░\nтАв рззрзз ржмрж╛рж░ ржжрзБрж░рзБржж рж╢рж░рзАржл\nтАв рззрзз ржмрж╛рж░ ржЖрж╕рзНрждрж╛ржЧржлрж┐рж░рзБрж▓рзНрж▓рж╛рж╣\n\nЁЯТл ржЖрж░ ржЕржмрж╢рзНржпржЗ ржкрж╢рзНржЪрж┐ржо ржжрж┐ржХрзЗ рждрж╛ржХрж┐рзЯрзЗ ржжрзЛрзЯрж╛ ржкрзЬржмрзЗржи",
        image: "https://i.imgur.com/28Et6s2.jpeg"
      },
      {
        title: "ЁЯУ┐ рж╕рж╛ржзрж╛рж░ржг ржжрзЛржпрж╝рж╛",
        body: "ЁЯУЬ ржЖрж▓рзНрж▓рж╛рж╣рзБржорзНржорж╛ ржЗржирзНржирж┐ ржЖрж╕ржЖрж▓рзБржХрж╛рж╕ рж╕рж╛ржмрж╛рждрж╛ fil amri, ржУржпрж╝рж╛рж╕ржЖрж▓рзБржХрж╛ 'ржЖржпрзАржорж╛рждar рж░рзБрж╢ржжрж┐\n\nЁЯТл ржЕрж░рзНрже: 'рж╣рзЗ ржЖрж▓рзНрж▓рж╛рж╣! ржЖржорж┐ ржЖржкржирж╛рж░ ржХрж╛ржЫрзЗ ржкрзНрж░рж╛рж░рзНржержирж╛ ржХрж░рж┐ ржжрзАржирзЗрж░ ржмрж┐рж╖рзЯрзЗ ржЕржмрж┐ржЪрж▓рждрж╛ ржПржмржВ ржЖржкржирж╛рж░ ржХрж╛ржЫрзЗ ржкрзНрж░рж╛рж░рзНржержирж╛ ржХрж░рж┐ ржЙржирзНржиржд ржпрзЛржЧрзНржпрждрж╛'",
        image: "https://i.imgur.com/NIjfdfz.jpeg"
      }
    ];

    if (args[0] && !isNaN(args[0])) {
      const choice = parseInt(args[0]);
      if (choice < 1 || choice > doyaContent.length) {
        return api.sendMessage(`тЪая╕П ржЕржмрзИржз ржирж┐рж░рзНржмрж╛ржЪржи! ржжржпрж╝рж╛ ржХрж░рзЗ 1-${doyaContent.length} ржПрж░ ржоржзрзНржпрзЗ ржПржХржЯрж┐ ржиржорзНржмрж░ рж▓рж┐ржЦрзБржиред`, threadID, messageID);
      }
      
      const doya = doyaContent[choice - 1];
      try {
        const imageStream = await global.utils.getStreamFromURL(doya.image);
        return api.sendMessage({
          body: `${doya.title}\n\n${doya.body}`,
          attachment: imageStream
        }, threadID, messageID);
      } catch (error) {
        console.error("ржжрзЛржпрж╝рж╛ ржкрж╛ржарж╛рждрзЗ рж╕ржорж╕рзНржпрж╛:", error);
        return api.sendMessage("тЪая╕П ржжрзЛржпрж╝рж╛ ржкрж╛ржарж╛ржирзЛ рж╕ржорзНржнржм рж╣ржпрж╝ржирж┐, ржкрж░рзЗ ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржи", threadID, messageID);
      }
    }
    
    let menuMessage = "ЁЯУЦ ржЗрж╕рж▓рж╛ржорж┐ржХ ржжрзЛржпрж╝рж╛ рж╕ржВржЧрзНрж░рж╣:\n\n";
    doyaContent.forEach((doya, index) => {
      menuMessage += `${index + 1}. ${doya.title}\n`;
    });
    
    menuMessage += "\nЁЯТл ржЖржкржирж╛рж░ ржкржЫржирзНржжрзЗрж░ ржжрзЛржпрж╝рж╛рж░ ржиржорзНржмрж░ржЯрж┐ рж▓рж┐ржЦрзБржи (1-8)";
    api.sendMessage(menuMessage, threadID, messageID);
  }
};
