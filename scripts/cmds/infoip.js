const axios = require("axios");

module.exports.config = {
    name: "infoip",
    aliases: ["ipinfo", "iplookup"],
    version: "1.0.0",
    author: "ğ´ğ‘ ğ‘–ğ‘“ ğ‘€ğ‘â„ğ‘šğ‘¢ğ‘‘",
    countDown: 5,
    role: 0,
    category: "ğ‘¢ğ‘¡ğ‘–ğ‘™ğ‘–ğ‘¡ğ‘¦",
    shortDescription: {
        en: "ğºğ‘’ğ‘¡ ğ‘‘ğ‘’ğ‘¡ğ‘ğ‘–ğ‘™ğ‘’ğ‘‘ ğ‘–ğ‘›ğ‘“ğ‘œğ‘Ÿğ‘šğ‘ğ‘¡ğ‘–ğ‘œğ‘› ğ‘ğ‘ğ‘œğ‘¢ğ‘¡ ğ‘ğ‘›ğ‘¦ ğ¼ğ‘ƒ ğ‘ğ‘‘ğ‘‘ğ‘Ÿğ‘’ğ‘ ğ‘ "
    },
    longDescription: {
        en: "ğ¹ğ‘’ğ‘¡ğ‘â„ğ‘’ğ‘  ğ‘‘ğ‘’ğ‘¡ğ‘ğ‘–ğ‘™ğ‘’ğ‘‘ ğ‘”ğ‘’ğ‘œğ‘™ğ‘œğ‘ğ‘ğ‘¡ğ‘–ğ‘œğ‘› ğ‘ğ‘›ğ‘‘ ğ‘›ğ‘’ğ‘¡ğ‘¤ğ‘œğ‘Ÿğ‘˜ ğ‘–ğ‘›ğ‘“ğ‘œğ‘Ÿğ‘šğ‘ğ‘¡ğ‘–ğ‘œğ‘› ğ‘“ğ‘œğ‘Ÿ ğ‘ğ‘›ğ‘¦ ğ¼ğ‘ƒ ğ‘ğ‘‘ğ‘‘ğ‘Ÿğ‘’ğ‘ ğ‘ "
    },
    guide: {
        en: "{p}infoip [ğ‘–ğ‘-ğ‘ğ‘‘ğ‘‘ğ‘Ÿğ‘’ğ‘ ğ‘ ]"
    },
    dependencies: {
        "axios": ""
    }
};

module.exports.onStart = async function({ message, args }) {
    try {
        if (!args[0]) {
            return message.reply("â“ | ğ‘ƒğ‘™ğ‘’ğ‘ğ‘ ğ‘’ ğ‘ğ‘Ÿğ‘œğ‘£ğ‘–ğ‘‘ğ‘’ ğ‘ğ‘› ğ¼ğ‘ƒ ğ‘ğ‘‘ğ‘‘ğ‘Ÿğ‘’ğ‘ ğ‘  ğ‘¡ğ‘œ ğ‘â„ğ‘’ğ‘ğ‘˜!\nğ¸ğ‘¥ğ‘ğ‘šğ‘ğ‘™ğ‘’: /ğ‘–ğ‘›ğ‘“ğ‘œğ‘–ğ‘ 8.8.8.8");
        }

        const ipAddress = args.join(" ");
        const res = await axios.get(`http://ip-api.com/json/${ipAddress}`);
        const data = res.data;

        if (data.status === 'fail') {
            return message.reply(`âŒ | ğ¹ğ‘ğ‘–ğ‘™ğ‘’ğ‘‘ ğ‘¡ğ‘œ ğ‘”ğ‘’ğ‘¡ ğ¼ğ‘ƒ ğ‘–ğ‘›ğ‘“ğ‘œğ‘Ÿğ‘šğ‘ğ‘¡ğ‘–ğ‘œğ‘›: ${data.message}`);
        }

        const infoMessage = `
ğŸŒ | ğ¼ğ‘ƒ ğ¼ğ‘ğ¹ğ‘‚ğ‘…ğ‘€ğ´ğ‘‡ğ¼ğ‘‚ğ‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”¹ ğ¼ğ‘ƒ ğ´ğ‘‘ğ‘‘ğ‘Ÿğ‘’ğ‘ ğ‘ : ${data.query}
ğŸ³ï¸ ğ¶ğ‘œğ‘¢ğ‘›ğ‘¡ğ‘Ÿğ‘¦: ${data.country}
ğŸ™ï¸ ğ¶ğ‘–ğ‘¡ğ‘¦: ${data.city}
ğŸ“ ğ‘…ğ‘’ğ‘”ğ‘–ğ‘œğ‘›: ${data.regionName}
ğŸ“¡ ğ¿ğ‘ğ‘¡ğ‘–ğ‘¡ğ‘¢ğ‘‘ğ‘’: ${data.lat}
ğŸ“¡ ğ¿ğ‘œğ‘›ğ‘”ğ‘–ğ‘¡ğ‘¢ğ‘‘ğ‘’: ${data.lon}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ | ğ¿ğ‘œğ‘ğ‘ğ‘¡ğ‘–ğ‘œğ‘› ğ´ğ‘ğ‘ğ‘¢ğ‘Ÿğ‘ğ‘ğ‘¦: ğ´ğ‘ğ‘ğ‘Ÿğ‘œğ‘¥ğ‘–ğ‘šğ‘ğ‘¡ğ‘’
âš ï¸ | ğ‘ğ‘œğ‘¡ğ‘’: ğ¼ğ‘ƒ ğ‘™ğ‘œğ‘ğ‘ğ‘¡ğ‘–ğ‘œğ‘› ğ‘šğ‘ğ‘¦ ğ‘›ğ‘œğ‘¡ ğ‘ğ‘™ğ‘¤ğ‘ğ‘¦ğ‘  ğ‘ğ‘’ ğ‘ğ‘Ÿğ‘’ğ‘ğ‘–ğ‘ ğ‘’`;

        await message.reply(infoMessage);

    } catch (error) {
        console.error("ğ¼ğ‘ƒ ğ¼ğ‘›ğ‘“ğ‘œ ğ¸ğ‘Ÿğ‘Ÿğ‘œğ‘Ÿ:", error);
        await message.reply("âŒ | ğ´ğ‘› ğ‘’ğ‘Ÿğ‘Ÿğ‘œğ‘Ÿ ğ‘œğ‘ğ‘ğ‘¢ğ‘Ÿğ‘Ÿğ‘’ğ‘‘ ğ‘¤â„ğ‘–ğ‘™ğ‘’ ğ‘“ğ‘’ğ‘¡ğ‘â„ğ‘–ğ‘›ğ‘” ğ¼ğ‘ƒ ğ‘–ğ‘›ğ‘“ğ‘œğ‘Ÿğ‘šğ‘ğ‘¡ğ‘–ğ‘œğ‘›. ğ‘ƒğ‘™ğ‘’ğ‘ğ‘ ğ‘’ ğ‘â„ğ‘’ğ‘ğ‘˜ ğ‘¡â„ğ‘’ ğ¼ğ‘ƒ ğ‘ğ‘‘ğ‘‘ğ‘Ÿğ‘’ğ‘ ğ‘  ğ‘“ğ‘œğ‘Ÿğ‘šğ‘ğ‘¡ ğ‘œğ‘Ÿ ğ‘¡ğ‘Ÿğ‘¦ ğ‘ğ‘”ğ‘ğ‘–ğ‘› ğ‘™ğ‘ğ‘¡ğ‘’ğ‘Ÿ.");
    }
};
