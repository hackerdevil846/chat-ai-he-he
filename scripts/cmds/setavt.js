const axios = require("axios");

module.exports.config = {
	name: "setavt",
	version: "1.3",
	hasPermssion: 2,
	credits: "_ğ‘¨ğ’”ğ’Šğ’‡ ğ‘´ğ’‚ğ’‰ğ’ğ’–ğ’…_", // Changed to requested font style
	description: "_ğ‘ªğ’‰ğ’‚ğ’ğ’ˆğ’† ğ’ƒğ’ğ’• ğ’‚ğ’—ğ’‚ğ’•ğ’‚ğ’“ (ğ‘¼ğ‘¹ğ‘³ ğ’ğ’“ ğ’“ğ’†ğ’‘ğ’ğ’š ğ’‚ğ’ ğ’Šğ’ğ’‚ğ’ˆğ’†). ğ‘ºğ’–ğ’‘ğ’‘ğ’ğ’“ğ’•ğ’” ğ’ğ’‘ğ’•ğ’Šğ’ğ’ğ’‚ğ’ ğ’„ğ’‚ğ’‘ğ’•ğ’Šğ’ğ’ ğ’‚ğ’ğ’… ğ’•ğ’†ğ’ğ’‘ğ’ğ’“ğ’‚ğ’“ğ’š ğ’‚ğ’—ğ’‚ğ’•ğ’‚ğ’“ (ğ’†ğ’™ğ’‘ğ’Šğ’“ğ’‚ğ’•ğ’Šğ’ğ’ ğ’Šğ’ ğ’”ğ’†ğ’„ğ’ğ’ğ’…ğ’”)._",
	category: "owner",
	usages: "_[<ğ’Šğ’ğ’‚ğ’ˆğ’† ğ’–ğ’“ğ’> | ğ’“ğ’†ğ’‘ğ’ğ’š ğ’Šğ’ğ’‚ğ’ˆğ’†] [<caption>] [<ğ’†ğ’™ğ’‘ğ’Šğ’“ğ’‚ğ’•ğ’Šğ’ğ’ğ‘¨ğ’‡ğ’•ğ’†ğ’“ (ğ’”ğ’†ğ’„ğ’ğ’ğ’…ğ’”)>]_",
	cooldowns: 5,
	dependencies: {
		"axios": "^1.0.0"
	},
	envConfig: {}
};

module.exports.languages = {
	"vi": {
		"cannotGetImage": "âŒ | ÄÃ£ xáº£y ra lá»—i khi truy váº¥n Ä‘áº¿n url hÃ¬nh áº£nh",
		"invalidImageFormat": "âŒ | Äá»‹nh dáº¡ng hÃ¬nh áº£nh khÃ´ng há»£p lá»‡",
		"changedAvatar": "âœ… | ÄÃ£ thay Ä‘á»•i avatar cá»§a bot thÃ nh cÃ´ng",
		"needImage": "âŒ | Vui lÃ²ng gá»­i Ä‘Æ°á»ng dáº«n hÃ¬nh áº£nh hoáº·c pháº£n há»“i 1 tin nháº¯n chá»©a áº£nh.\nCÃ¡ch dÃ¹ng: %1",
		"errorChanging": "âŒ | ÄÃ£ xáº£y ra lá»—i khi thay Ä‘á»•i avatar:",
		"usage": "CÃ¡ch dÃ¹ng: %1"
	},
	"en": {
		"cannotGetImage": "âŒ | _ğ‘¨ğ’ ğ’†ğ’“ğ’“ğ’ğ’“ ğ’ğ’„ğ’„ğ’–ğ’“ğ’“ğ’†ğ’… ğ’˜ğ’‰ğ’Šğ’ğ’† ğ’’ğ’–ğ’†ğ’“ğ’šğ’Šğ’ğ’ˆ ğ’•ğ’‰ğ’† ğ’Šğ’ğ’‚ğ’ˆğ’† ğ’–ğ’“ğ’_",
		"invalidImageFormat": "âŒ | _ğ‘°ğ’ğ’—ğ’‚ğ’ğ’Šğ’… ğ’Šğ’ğ’‚ğ’ˆğ’† ğ’‡ğ’ğ’“ğ’ğ’‚ğ’•_",
		"changedAvatar": "âœ… | _ğ‘ªğ’‰ğ’‚ğ’ğ’ˆğ’†ğ’… ğ’ƒğ’ğ’• ğ’‚ğ’—ğ’‚ğ’•ğ’‚ğ’“ ğ’”ğ’–ğ’„ğ’„ğ’†ğ’”ğ’”ğ’‡ğ’–ğ’ğ’ğ’š_",
		"needImage": "âŒ | _ğ‘·ğ’ğ’†ğ’‚ğ’”ğ’† ğ’‘ğ’“ğ’ğ’—ğ’Šğ’…ğ’† ğ’‚ğ’ ğ’Šğ’ğ’‚ğ’ˆğ’† ğ‘¼ğ‘¹ğ‘³ ğ’ğ’“ ğ’“ğ’†ğ’‘ğ’ğ’š ğ’•ğ’ ğ’‚ ğ’ğ’†ğ’”ğ’”ğ’‚ğ’ˆğ’† ğ’•ğ’‰ğ’‚ğ’• ğ’„ğ’ğ’ğ’•ğ’‚ğ’Šğ’ğ’” ğ’‚ğ’ ğ’Šğ’ğ’‚ğ’ˆğ’†.\nğ‘¼ğ’”ğ’‚ğ’ˆğ’†: %1_",
		"errorChanging": "âŒ | _ğ‘¨ğ’ ğ’†ğ’“ğ’“ğ’ğ’“ ğ’ğ’„ğ’„ğ’–ğ’“ğ’“ğ’†ğ’… ğ’˜ğ’‰ğ’Šğ’ğ’† ğ’„ğ’‰ğ’‚ğ’ğ’ˆğ’Šğ’ğ’ˆ ğ’‚ğ’—ğ’‚ğ’•ğ’‚ğ’“:_",
		"usage": "_ğ‘¼ğ’”ğ’‚ğ’ˆğ’†: %1_"
	}
};

module.exports.onLoad = function () {
	// _ğ’ğ’ğ’•ğ’‰ğ’Šğ’ğ’ˆ ğ’ğ’†ğ’†ğ’…ğ’†ğ’… ğ’ğ’ ğ’ğ’ğ’‚ğ’… ğ’‡ğ’ğ’“ ğ’ğ’ğ’˜, ğ’ƒğ’–ğ’• ğ’‘ğ’ğ’‚ğ’„ğ’†ğ’‰ğ’ğ’ğ’…ğ’†ğ’“ ğ’Œğ’†ğ’‘ğ’• ğ’‡ğ’ğ’“ ğ’‡ğ’–ğ’•ğ’–ğ’“ğ’† ğ’†ğ’ğ’‰ğ’‚ğ’ğ’„ğ’†ğ’ğ’†ğ’ğ’•ğ’”_
};

/**
 * _ğ’“ğ’–ğ’ - ğ’ğ’‚ğ’Šğ’ ğ’„ğ’ğ’ğ’ğ’‚ğ’ğ’… ğ’‰ğ’‚ğ’ğ’…ğ’ğ’†ğ’“_
 * _ğ’‘ğ’‚ğ’“ğ’‚ğ’ğ’”: ğ’ğ’ƒğ’‹ğ’†ğ’„ğ’• ğ’…ğ’†ğ’”ğ’•ğ’“ğ’–ğ’„ğ’•ğ’–ğ’“ğ’†ğ’… ğ’ƒğ’š ğ‘®ğ’ğ’‚ğ’•ğ‘©ğ’ğ’• ğ’‡ğ’“ğ’‚ğ’ğ’†ğ’˜ğ’ğ’“ğ’Œ. ğ‘¾ğ’† ğ’†ğ’™ğ’‘ğ’†ğ’„ğ’• ğ’‚ğ’• ğ’ğ’†ğ’‚ğ’”ğ’• ğ’‚ğ’‘ğ’Š, ğ’†ğ’—ğ’†ğ’ğ’•, ğ’‚ğ’“ğ’ˆğ’”, ğ’‚ğ’ğ’… ğ’ˆğ’†ğ’•ğ‘³ğ’‚ğ’ğ’ˆ ğ’•ğ’ ğ’ƒğ’† ğ’‚ğ’—ğ’‚ğ’Šğ’ğ’‚ğ’ƒğ’ğ’†._
 */
module.exports.onStart = async function ({ api, event, args, getLang, message }) { // Added 'message' for consistency with examples
	const threadID = event.threadID || event.senderID;
	// _ğ‘«ğ’†ğ’•ğ’†ğ’“ğ’ğ’Šğ’ğ’† ğ’ğ’‚ğ’ğ’ˆğ’–ğ’‚ğ’ˆğ’† ğ’‰ğ’†ğ’ğ’‘ğ’†ğ’“ (ğ’ˆğ’†ğ’•ğ‘³ğ’‚ğ’ğ’ˆ ğ’ğ’‚ğ’š ğ’ğ’ğ’• ğ’ƒğ’† ğ’‘ğ’“ğ’ğ’—ğ’Šğ’…ğ’†ğ’… ğ’ƒğ’š ğ’”ğ’ğ’ğ’† ğ‘®ğ’ğ’‚ğ’•ğ‘©ğ’ğ’• ğ’—ğ’‚ğ’“ğ’Šğ’‚ğ’ğ’•ğ’”)_
	const lang = (typeof getLang === "function") ? getLang : (key => {
		// _ğ’‡ğ’‚ğ’ğ’ğ’ƒğ’‚ğ’„ğ’Œ: ğ’…ğ’†ğ’‡ğ’‚ğ’–ğ’ğ’• ğ’•ğ’ ğ‘¬ğ’ğ’ˆğ’ğ’Šğ’”ğ’‰ ğ’ğ’†ğ’”ğ’”ğ’‚ğ’ˆğ’†ğ’” ğ’‚ğ’ƒğ’ğ’—ğ’†_
		const locale = "en";
		return module.exports.languages[locale][key] || module.exports.languages["en"][key] || key;
	});

	// _ğ‘©ğ’–ğ’Šğ’ğ’… ğ’–ğ’”ğ’‚ğ’ˆğ’† ğ’”ğ’•ğ’“ğ’Šğ’ğ’ˆ ğ’‡ğ’ğ’“ ğ’‡ğ’‚ğ’ğ’ğ’ƒğ’‚ğ’„ğ’Œ ğ‘ºğ’šğ’ğ’•ğ’‚ğ’™/ğ‘¬ğ’“ğ’“ğ’ğ’“ ğ’ğ’†ğ’”ğ’”ğ’‚ğ’ˆğ’†ğ’”_
	const usageText = `${module.exports.config.usages}\n_ğ‘¬ğ’™ğ’‚ğ’ğ’‘ğ’ğ’†ğ’”:_\n  ${module.exports.config.usages} https://i.imgur.com/example.jpg\n  ${module.exports.config.usages} https://i.imgur.com/example.jpg _ğ‘¯ğ’†ğ’ğ’ğ’_ 3600\n  _ğ‘¹ğ’†ğ’‘ğ’ğ’š ğ’•ğ’ ğ’‚ğ’ ğ’Šğ’ğ’‚ğ’ˆğ’† ğ’˜ğ’Šğ’•ğ’‰:_ ${module.exports.config.usages}`;

	// _ğ‘¹ğ’†ğ’”ğ’ğ’ğ’—ğ’† ğ’Šğ’ğ’‚ğ’ˆğ’† ğ‘¼ğ‘¹ğ‘³:_
	// 1) _ğ’‡ğ’Šğ’“ğ’”ğ’• ğ’‚ğ’“ğ’ˆ ğ’Šğ’‡ ğ’”ğ’•ğ’‚ğ’“ğ’•ğ’” ğ’˜ğ’Šğ’•ğ’‰ ğ’‰ğ’•ğ’•ğ’‘/ğ’‰ğ’•ğ’•ğ’‘ğ’”_
	// 2) _ğ’‚ğ’•ğ’•ğ’‚ğ’„ğ’‰ğ’ğ’†ğ’ğ’•ğ’” ğ’”ğ’†ğ’ğ’• ğ’˜ğ’Šğ’•ğ’‰ ğ’•ğ’‰ğ’† ğ’„ğ’ğ’ğ’ğ’‚ğ’ğ’…_
	// 3) _ğ’‚ğ’•ğ’•ğ’‚ğ’„ğ’‰ğ’ğ’†ğ’ğ’•ğ’” ğ’Šğ’ ğ’•ğ’‰ğ’† ğ’“ğ’†ğ’‘ğ’ğ’Šğ’†ğ’…-ğ’•ğ’ ğ’ğ’†ğ’”ğ’”ğ’‚ğ’ˆğ’†_
	const maybeUrlArg = (args[0] || "");
	let imageURL = null;
	if (maybeUrlArg.startsWith("http")) {
		imageURL = args.shift();
	}
	// _ğ‘°ğ’‡ ğ’ğ’ğ’• ğ’‘ğ’“ğ’ğ’—ğ’Šğ’…ğ’†ğ’… ğ’‚ğ’” ğ’‚ğ’“ğ’ˆ, ğ’„ğ’‰ğ’†ğ’„ğ’Œ ğ’‚ğ’•ğ’•ğ’‚ğ’„ğ’‰ğ’ğ’†ğ’ğ’•ğ’” ğ’Šğ’ ğ’•ğ’‰ğ’† ğ’„ğ’–ğ’“ğ’“ğ’†ğ’ğ’• ğ’†ğ’—ğ’†ğ’ğ’• ğ’ğ’“ ğ’•ğ’‰ğ’† ğ’“ğ’†ğ’‘ğ’ğ’Šğ’†ğ’… ğ’ğ’†ğ’”ğ’”ğ’‚ğ’ˆğ’†_
	if (!imageURL) {
		imageURL = event.attachments?.[0]?.url || event.messageReply?.attachments?.[0]?.url || null;
	}

	// _ğ‘°ğ’‡ ğ’”ğ’•ğ’Šğ’ğ’ ğ’ğ’ ğ’Šğ’ğ’‚ğ’ˆğ’†, ğ’”ğ’†ğ’ğ’… ğ’–ğ’”ğ’‚ğ’ˆğ’†/ğ’”ğ’šğ’ğ’•ğ’‚ğ’™ ğ’†ğ’“ğ’“ğ’ğ’“_
	if (!imageURL) {
		return message.reply(lang("needImage").replace("%1", usageText)); // Used message.reply for consistency
	}

	// _ğ’†ğ’™ğ’‘ğ’Šğ’“ğ’‚ğ’•ğ’Šğ’ğ’ğ‘¨ğ’‡ğ’•ğ’†ğ’“: ğ’Šğ’‡ ğ’ğ’‚ğ’”ğ’• ğ’‚ğ’“ğ’ˆ ğ’Šğ’” ğ’‚ ğ’ğ’–ğ’ğ’ƒğ’†ğ’“, ğ’•ğ’“ğ’†ğ’‚ğ’• ğ’‚ğ’” ğ’†ğ’™ğ’‘ğ’Šğ’“ğ’‚ğ’•ğ’Šğ’ğ’ ğ’Šğ’ ğ’”ğ’†ğ’„ğ’ğ’ğ’…ğ’”_
	let expirationAfter = null;
	if (args.length > 0) {
		const last = args[args.length - 1];
		// _ğ’‚ğ’ğ’ğ’ğ’˜ ğ’ğ’–ğ’ğ’†ğ’“ğ’Šğ’„ ğ’”ğ’•ğ’“ğ’Šğ’ğ’ˆğ’” ğ’ğ’Šğ’Œğ’† "3600"_
		if (!isNaN(last) && last !== "") {
			expirationAfter = parseInt(args.pop());
			// _ğ’‘ğ’“ğ’†ğ’—ğ’†ğ’ğ’• ğ’ğ’†ğ’ˆğ’‚ğ’•ğ’Šğ’—ğ’† ğ’—ğ’‚ğ’ğ’–ğ’†ğ’”_
			if (expirationAfter < 0) expirationAfter = null;
		}
	}

	// _ğ’„ğ’‚ğ’‘ğ’•ğ’Šğ’ğ’: ğ’“ğ’†ğ’ğ’‚ğ’Šğ’ğ’Šğ’ğ’ˆ ğ’‚ğ’“ğ’ˆğ’” ğ’‹ğ’ğ’Šğ’ğ’†ğ’…_
	const caption = args.join(" ").trim() || "";

	// _ğ‘­ğ’†ğ’•ğ’„ğ’‰ ğ’Šğ’ğ’‚ğ’ˆğ’† ğ’‚ğ’” ğ’”ğ’•ğ’“ğ’†ğ’‚ğ’_
	let response;
	try {
		response = await axios.get(imageURL, { responseType: "stream", timeout: 20000 });
	} catch (err) {
		// _ğ’ğ’†ğ’•ğ’˜ğ’ğ’“ğ’Œ / ğ’‚ğ’™ğ’Šğ’ğ’” ğ’†ğ’“ğ’“ğ’ğ’“_
		return message.reply(lang("cannotGetImage")); // Used message.reply
	}

	// _ğ‘½ğ’‚ğ’ğ’Šğ’…ğ’‚ğ’•ğ’† ğ’„ğ’ğ’ğ’•ğ’†ğ’ğ’•-ğ’•ğ’šğ’‘ğ’† ğ’‰ğ’†ğ’‚ğ’…ğ’†ğ’“_
	const contentType = (response.headers && (response.headers["content-type"] || response.headers["Content-Type"])) || "";
	if (!contentType.includes("image")) {
		return message.reply(lang("invalidImageFormat")); // Used message.reply
	}

	// _ğ‘´ğ’‚ğ’ğ’š ğ’ƒğ’ğ’• ğ’‡ğ’“ğ’‚ğ’ğ’†ğ’˜ğ’ğ’“ğ’Œğ’” ğ’†ğ’™ğ’‘ğ’†ğ’„ğ’• ğ’‚ ğ’‡ğ’Šğ’ğ’†-ğ’ğ’Šğ’Œğ’† ğ’ğ’ƒğ’‹ğ’†ğ’„ğ’• ğ’˜ğ’Šğ’•ğ’‰ .ğ’‘ğ’‚ğ’•ğ’‰, ğ’ğ’“ ğ’‚ğ’„ğ’„ğ’†ğ’‘ğ’• ğ’”ğ’•ğ’“ğ’†ğ’‚ğ’ğ’” ğ’…ğ’Šğ’“ğ’†ğ’„ğ’•ğ’ğ’š._
	// _ğ‘²ğ’†ğ’†ğ’‘ ğ’•ğ’‰ğ’† ğ’ğ’“ğ’Šğ’ˆğ’Šğ’ğ’‚ğ’ ğ’‚ğ’‘ğ’‘ğ’“ğ’ğ’‚ğ’„ğ’‰: ğ’”ğ’†ğ’• ğ’‘ğ’‚ğ’•ğ’‰ ğ’”ğ’ ğ’‡ğ’“ğ’‚ğ’ğ’†ğ’˜ğ’ğ’“ğ’Œğ’” ğ’•ğ’‰ğ’‚ğ’• ğ’“ğ’†ğ’ğ’š ğ’ğ’ ğ’Šğ’• ğ’„ğ’‚ğ’ ğ’˜ğ’ğ’“ğ’Œ._
	try {
		response.data.path = "avatar.jpg";
	} catch (e) {
		// _ğ’Šğ’ˆğ’ğ’ğ’“ğ’†; ğ’“ğ’†ğ’”ğ’‘ğ’ğ’ğ’”ğ’†.ğ’…ğ’‚ğ’•ğ’‚ ğ’ğ’‚ğ’š ğ’ƒğ’† ğ’‚ ğ’”ğ’•ğ’“ğ’†ğ’‚ğ’ ğ’ğ’ƒğ’‹ğ’†ğ’„ğ’• ğ’˜ğ’† ğ’„ğ’‚ğ’ ğ’”ğ’•ğ’Šğ’ğ’ ğ’‘ğ’‚ğ’”ğ’”_
	}

	// _ğ‘¨ğ’•ğ’•ğ’†ğ’ğ’‘ğ’• ğ’•ğ’ ğ’„ğ’‰ğ’‚ğ’ğ’ˆğ’† ğ’‚ğ’—ğ’‚ğ’•ğ’‚ğ’“. ğ‘ºğ’–ğ’‘ğ’‘ğ’ğ’“ğ’• ğ’ƒğ’ğ’•ğ’‰ ğ’„ğ’‚ğ’ğ’ğ’ƒğ’‚ğ’„ğ’Œ-ğ’”ğ’•ğ’šğ’ğ’† ğ’‚ğ’ğ’… ğ’‘ğ’“ğ’ğ’ğ’Šğ’”ğ’†-ğ’”ğ’•ğ’šğ’ğ’† ğ’‚ğ’‘ğ’Š.ğ’„ğ’‰ğ’‚ğ’ğ’ˆğ’†ğ‘¨ğ’—ğ’‚ğ’•ğ’‚ğ’“ ğ’Šğ’ğ’‘ğ’ğ’†ğ’ğ’†ğ’ğ’•ğ’‚ğ’•ğ’Šğ’ğ’ğ’”._
	try {
		// _ğ‘°ğ’‡ ğ’‚ğ’‘ğ’Š.ğ’„ğ’‰ğ’‚ğ’ğ’ˆğ’†ğ‘¨ğ’—ğ’‚ğ’•ğ’‚ğ’“ ğ’†ğ’™ğ’‘ğ’†ğ’„ğ’•ğ’” ğ’‚ ğ’„ğ’‚ğ’ğ’ğ’ƒğ’‚ğ’„ğ’Œ (ğ’ğ’ğ’…ğ’†-ğ’”ğ’•ğ’šğ’ğ’†), ğ’˜ğ’“ğ’‚ğ’‘ ğ’Šğ’• ğ’Šğ’ ğ’‚ ğ‘·ğ’“ğ’ğ’ğ’Šğ’”ğ’†_
		const changeAvatar = api.changeAvatar;
		if (typeof changeAvatar === "function") {
			// _ğ‘»ğ’“ğ’š ğ’„ğ’‚ğ’ğ’ğ’Šğ’ğ’ˆ ğ’‚ğ’ğ’… ğ’…ğ’†ğ’•ğ’†ğ’„ğ’• ğ’˜ğ’‰ğ’†ğ’•ğ’‰ğ’†ğ’“ ğ’Šğ’• ğ’“ğ’†ğ’•ğ’–ğ’“ğ’ğ’” ğ’‚ ğ‘·ğ’“ğ’ğ’ğ’Šğ’”ğ’†_
			const result = changeAvatar(response.data, caption, expirationAfter ? expirationAfter * 1000 : null, (err) => {
				// _ğ‘°ğ’‡ ğ‘¨ğ‘·ğ‘° ğ’–ğ’”ğ’†ğ’” ğ’„ğ’‚ğ’ğ’ğ’ƒğ’‚ğ’„ğ’Œ, ğ’•ğ’‰ğ’Šğ’” ğ’„ğ’‚ğ’ğ’ğ’ƒğ’‚ğ’„ğ’Œ ğ’˜ğ’Šğ’ğ’ ğ’†ğ’™ğ’†ğ’„ğ’–ğ’•ğ’†; ğ’˜ğ’† ğ’‰ğ’‚ğ’ğ’…ğ’ğ’† ğ’Šğ’ğ’”ğ’Šğ’…ğ’† ğ‘·ğ’“ğ’ğ’ğ’Šğ’”ğ’† ğ’ƒğ’†ğ’ğ’ğ’˜._
			});
			// _ğ‘°ğ’‡ ğ’“ğ’†ğ’”ğ’–ğ’ğ’• ğ’Šğ’” ğ’‚ ğ‘·ğ’“ğ’ğ’ğ’Šğ’”ğ’†, ğ’‚ğ’˜ğ’‚ğ’Šğ’• ğ’Šğ’•_
			if (result && typeof result.then === "function") {
				await result;
			} else {
				// _ğ‘¶ğ’•ğ’‰ğ’†ğ’“ğ’˜ğ’Šğ’”ğ’† ğ’‚ğ’”ğ’”ğ’–ğ’ğ’† ğ’„ğ’‚ğ’ğ’ğ’ƒğ’‚ğ’„ğ’Œ-ğ’”ğ’•ğ’šğ’ğ’† â€” ğ’˜ğ’“ğ’‚ğ’‘ ğ’Šğ’ ğ’‚ ğ’‘ğ’“ğ’ğ’ğ’Šğ’”ğ’† ğ’‚ğ’ğ’… ğ’˜ğ’‚ğ’Šğ’• ğ’‡ğ’ğ’“ ğ’•ğ’‰ğ’† ğ’„ğ’‚ğ’ğ’ğ’ƒğ’‚ğ’„ğ’Œ ğ’•ğ’ ğ’„ğ’‚ğ’ğ’ ğ’ƒğ’‚ğ’„ğ’Œ._
				await new Promise((resolve, reject) => {
					try {
						// _ğ’„ğ’‚ğ’ğ’ ğ’‚ğ’ˆğ’‚ğ’Šğ’ ğ’ƒğ’–ğ’• ğ’˜ğ’Šğ’•ğ’‰ ğ’ğ’–ğ’“ ğ’ğ’˜ğ’ ğ’„ğ’‚ğ’ğ’ğ’ƒğ’‚ğ’„ğ’Œ ğ’•ğ’ ğ’…ğ’†ğ’•ğ’†ğ’„ğ’• ğ’„ğ’ğ’ğ’‘ğ’ğ’†ğ’•ğ’Šğ’ğ’_
						changeAvatar(response.data, caption, expirationAfter ? expirationAfter * 1000 : null, (err) => {
							if (err) return reject(err);
							return resolve();
						});
					} catch (err) {
						return reject(err);
					}
				});
			}
		} else {
			// _ğ‘°ğ’‡ ğ’„ğ’‰ğ’‚ğ’ğ’ˆğ’†ğ‘¨ğ’—ğ’‚ğ’•ğ’‚ğ’“ ğ’ğ’ğ’• ğ’‚ğ’—ğ’‚ğ’Šğ’ğ’‚ğ’ƒğ’ğ’†, ğ’•ğ’‰ğ’“ğ’ğ’˜_
			throw new Error("api.changeAvatar is not a function");
		}
	} catch (err) {
		// _ğ‘ºğ’†ğ’ğ’… ğ’‚ ğ’‰ğ’†ğ’ğ’‘ğ’‡ğ’–ğ’ ğ’†ğ’“ğ’“ğ’ğ’“ ğ’ğ’†ğ’”ğ’”ğ’‚ğ’ˆğ’† ğ’˜ğ’Šğ’•ğ’‰ ğ’•ğ’‰ğ’† ğ’–ğ’ğ’…ğ’†ğ’“ğ’ğ’šğ’Šğ’ğ’ˆ ğ’†ğ’“ğ’“ğ’ğ’“ ğ’•ğ’†ğ’™ğ’• (ğ’•ğ’“ğ’Šğ’ğ’ğ’†ğ’…)_
		const errText = (err && err.message) ? ` ${err.message}` : "";
		return message.reply(`${lang("errorChanging")} ${errText}`); // Used message.reply
	}

	// _ğ‘ºğ’–ğ’„ğ’„ğ’†ğ’”ğ’”_
	return message.reply(lang("changedAvatar")); // Used message.reply
};
